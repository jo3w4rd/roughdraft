<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],   j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-MC35ML');</script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
  
    <title>ShaderLab: Legacy Alpha Testing | Unity Technologies Developer Guide </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="ShaderLab: Legacy Alpha Testing | Unity Technologies Developer Guide ">
    <meta name="generator" content="docfx 2.40.7.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" class="manual">
	<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MC35ML" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
        
        		<div class="back-to-unity-group">
        			<a class="back-to-unity" href="http://docs.unity3d.com/">docs.unity3d.com</a>
        		</div>
        
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items"></div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="shaderlab-legacy-alpha-testing">ShaderLab: Legacy Alpha Testing</h1>

<p>The alpha test is a last chance to reject a pixel from being written to the screen.</p>
<p><em>**Note:</em>* AlphaTest commands have no effect when <a href="SL-ShaderPrograms.html">fragment programs</a> are used; on most platforms alpha testing is done in the shader using HLSL clip() function. It is advisable to use programmable shaders these days instead of SetTexture commands.*</p>
<p>After the final output color has been calculated, the color can optionally have its alpha value compared to a fixed value. If the test fails, the pixel is not written to the display.</p>
<h2 id="syntax">Syntax</h2>
<pre><code>AlphaTest Off
</code></pre><p>Render all pixels (default) or...</p>
<pre><code>AlphaTest comparison AlphaValue
</code></pre><p>Set up the alpha test to only render pixels whose alpha value is within a certain range.</p>
<h3 id="comparison">Comparison</h3>
<p>Comparison is one of the following words:</p>
<table>
<thead>
<tr>
<th style="text-align:left"></th>
<th style="text-align:left"></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>Greater</strong></td>
<td style="text-align:left">Only render pixels whose alpha is greater than <em>AlphaValue</em>.</td>
</tr>
<tr>
<td style="text-align:left"><strong>GEqual</strong></td>
<td style="text-align:left">Only render pixels whose alpha is greater than or equal to <em>AlphaValue</em>.</td>
</tr>
<tr>
<td style="text-align:left"><strong>Less</strong></td>
<td style="text-align:left">Only render pixels whose alpha value is less than <em>AlphaValue</em>.</td>
</tr>
<tr>
<td style="text-align:left"><strong>LEqual</strong></td>
<td style="text-align:left">Only render pixels whose alpha value is less than or equal to from <em>AlphaValue</em>.</td>
</tr>
<tr>
<td style="text-align:left"><strong>Equal</strong></td>
<td style="text-align:left">Only render pixels whose alpha value equals <em>AlphaValue</em>.</td>
</tr>
<tr>
<td style="text-align:left"><strong>NotEqual</strong></td>
<td style="text-align:left">Only render pixels whose alpha value differs from <em>AlphaValue</em>.</td>
</tr>
<tr>
<td style="text-align:left"><strong>Always</strong></td>
<td style="text-align:left">Render all pixels. This is functionally equivalent to <em>AlphaTest Off</em>.</td>
</tr>
<tr>
<td style="text-align:left"><strong>Never</strong></td>
<td style="text-align:left">Don&#39;t render any pixels.</td>
</tr>
</tbody>
</table>
<h3 id="alphavalue">AlphaValue</h3>
<p>A floating-point number between 0 and 1. This can also be a variable reference to a float or range property, in which case it should be written using the standard square bracket notation (<em>[VariableName]</em>).</p>
<h2 id="details">Details</h2>
<p>The alpha test is important when rendering concave objects with transparent parts. The graphics card maintains a record of the depth of every pixel written to the screen. If a new pixel is further away than one already rendered, the new pixel is not written to the display. This means that even with <a href="SL-Blend.html">Blending</a>, objects will not show through.</p>
<p><img src="../uploads/Main/sl-alphatest2.jpg" alt=""> </p>
<p>In this figure, the tree on the left is rendered using <strong>AlphaTest</strong>. Note how the pixels in it are either completely transparent or opaque. The center tree is rendered using only <strong>Alpha Blending</strong> - notice how transparent parts of nearby branches cover the distant leaves because of the depth buffer. The tree on the right is rendered using the last example shader - which implements a combination of blending and alpha testing to hide any artifacts.</p>
<h2 id="examples">Examples</h2>
<p>The simplest possible example, assign a texture with an alpha channel to it. The object will only be visible where alpha is greater than 0.5</p>
<pre><code>Shader &quot;Simple Alpha Test&quot; {
    Properties {
        _MainTex (&quot;Base (RGB) Transparency (A)&quot;, 2D) = &quot;&quot; {}
    }
    SubShader {
        Pass {
            // Only render pixels with an alpha larger than 50%
            AlphaTest Greater 0.5
            SetTexture [_MainTex] { combine texture }
        }
    }
}
</code></pre><p>This is not much good by itself. Let us add some lighting and make the cutoff value tweakable:</p>
<pre><code>Shader &quot;Cutoff Alpha&quot; {
    Properties {
        _MainTex (&quot;Base (RGB) Transparency (A)&quot;, 2D) = &quot;&quot; {}
        _Cutoff (&quot;Alpha cutoff&quot;, Range (0,1)) = 0.5
    }
    SubShader {
        Pass {
            // Use the Cutoff parameter defined above to determine
            // what to render.
            AlphaTest Greater [_Cutoff]
            Material {
                Diffuse (1,1,1,1)
                Ambient (1,1,1,1)
            }
            Lighting On
            SetTexture [_MainTex] { combine texture * primary }
        }
    }
}
</code></pre><p>When rendering plants and trees, many games have the hard edges typical of alpha testing. A way around that is to render the object twice. In the first pass, we use alpha testing to only render pixels that are more than 50% opaque. In the second pass, we alpha-blend the graphic in the parts that were cut away, without recording the depth of the pixel. We might get a bit of confusion as further away branches overwrite the nearby ones, but in practice, that is hard to see as leaves have a lot of visual detail in them.</p>
<pre><code>Shader &quot;Vegetation&quot; {
    Properties {
        _Color (&quot;Main Color&quot;, Color) = (.5, .5, .5, .5)
        _MainTex (&quot;Base (RGB) Alpha (A)&quot;, 2D) = &quot;white&quot; {}
        _Cutoff (&quot;Base Alpha cutoff&quot;, Range (0,.9)) = .5
    }
    SubShader {
        // Set up basic lighting
        Material {
            Diffuse [_Color]
            Ambient [_Color]
        }
        Lighting On

        // Render both front and back facing polygons.
        Cull Off

        // first pass:
        // render any pixels that are more than [_Cutoff] opaque
        Pass {
            AlphaTest Greater [_Cutoff]
            SetTexture [_MainTex] {
                combine texture * primary, texture
            }
        }

        // Second pass:
        // render in the semitransparent details.
        Pass {
            // Dont write to the depth buffer
            ZWrite off
            // Don&#39;t write pixels we have already written.
            ZTest Less
            // Only render pixels less or equal to the value
            AlphaTest LEqual [_Cutoff]

            // Set up alpha blending
            Blend SrcAlpha OneMinusSrcAlpha

            SetTexture [_MainTex] {
                combine texture * primary, texture
            }
        }
    }
}
</code></pre><p>Note that we have some setup inside the SubShader, rather than in the individual passes. Any state set in the SubShader is inherited as defaults in passes inside it.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Copyright © 2019 Unity Technologies<br>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
