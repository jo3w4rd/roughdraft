<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],   j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-MC35ML');</script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
  
    <title>Spatial Mapping Collider | Unity Technologies Developer Guide </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Spatial Mapping Collider | Unity Technologies Developer Guide ">
    <meta name="generator" content="docfx 2.40.7.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" class="manual">
	<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MC35ML" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
        
        		<div class="back-to-unity-group">
        			<a class="back-to-unity" href="http://docs.unity3d.com/">docs.unity3d.com</a>
        		</div>
        
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items"></div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="spatial-mapping-collider">Spatial Mapping Collider</h1>

<p>The <strong>Spatial Mapping Collider</strong> component allows holographic content to interact with real-world physical Surfaces. This component handles creating, updating, and destroying the Surface GameObject Colliders in the Scene.</p>
<p>The component periodically queries the system for Surface changes in the physical world. When the system reports Surface changes, the <strong>Spatial Mapping Collider</strong> component prioritizes when each reported Surface is baked by Unity. Every time a Surface is baked by the system, a new GameObject is then generated by Unity, containing a <a href="class-MeshFilter.html">Mesh Filter</a> and <a href="class-MeshCollider.html">Mesh Collider</a> component. A Surface with a Mesh Collider allows raycasts to collide with it as with any other mesh in Unity. See <a href="CameraRays.html">Camera Raycast</a> documentation for more information.</p>
<p><strong>Note:</strong> This component only updates the Mesh Collider components of Surface GameObjects, and not the Mesh Renderers.</p>
<p><strong>Note: Spatial Mapping Colliders</strong> update with less latency than <strong>Spatial Mapping Mesh Renderers</strong>. This means that Colliders update faster than Renderers.</p>
<p><img src="../uploads/Main/spatial_mapping_collider.png" alt="Spatial Mapping Collider component as it appears in the Unity Editor"></p>
<h2 id="collider-settings">Collider Settings</h2>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Setting</strong></th>
<th style="text-align:left"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>Enable Collisions</strong></td>
<td style="text-align:left">Check this box to enable Surface <a href="class-MeshCollider.html">Mesh Colliders</a>. This means that holographic content can collide with Surfaces.</td>
</tr>
<tr>
<td style="text-align:left"><strong>Mesh Layer</strong></td>
<td style="text-align:left">Set the <a href="Layers.html">Layer</a> property on all the Surface Mesh Colliders. Note that you need to set Layers for raycasts. When performing a raycast, you must indicate which Layers you want the ray intersection to test against. See <a href="CameraRays.html">Camera Raycast</a> documentation for more information, and see <a href="#ExampleScript">Example script: SpatialSurface raycast</a>, below. <br><br>By default, Unity assigns all GameObjects to the <strong>Default</strong> Layer. However, it is good practice to assign your GameObjects to a specific Layer. We recommend that you create a new layer specifically for Spatial Mapping Surfaces and assign this Layer to the Mesh Layer property.</td>
</tr>
<tr>
<td style="text-align:left"><strong>Physic Material</strong></td>
<td style="text-align:left">Specify which <strong>Physic Material</strong> to assign to each Surface GameObject’s Mesh Collider. The default is <strong>None (Physic Material)</strong>. <br><br>A <strong>Physic Material</strong> specifies how other Rigidbody components should interact with it. For example, you might want to create a Surface that simulates ice, and therefore applies less friction to a GameObject moving on it. <br><br>The Spatial Mapping Collider component applies its <strong>Physic Material</strong> to all of the Mesh Colliders on its Surface GameObjects. See documentation on <a href="class-PhysicMaterial.html">Physic Material</a> for more information</td>
</tr>
</tbody>
</table>
<h2 id="general-settings">General Settings</h2>
<!-- include SpatialMappingComponentsGeneralSettings -->
<h2 id="using-the-spatial-mapping-collider">Using the Spatial Mapping Collider</h2>
<h3 id="surface-gameobjects">Surface GameObjects</h3>
<p>When you add a <strong>Spatial Mapping Collider</strong> component to a GameObject in your Scene, it generates its own separate set of Surface GameObjects during runtime. These appear in your Scene parented to a Surface Parent GameObject.</p>
<p>The Surface GameObjects generated by the <strong>Spatial Mapping Collider</strong> contain the following components:</p>
<ul>
<li><p><a href="class-MeshFilter.html">Mesh Filter</a></p>
</li>
<li><p><a href="wmr_input_types.html">World Anchor</a></p>
</li>
<li><p><a href="class-MeshCollider.html">Mesh Collider</a></p>
</li>
</ul>
<p><img src="../uploads/Main/sufacego_with_collider.png" alt="Components of a Surface GameObject generated by a __Spatial Mapping Collider__"></p>
<p>If you add multiple <strong>Spatial Mapping Collider</strong> components to your Scene, each individual component generates its own set of Surface GameObjects. For example, if two GameObjects in your Scene contain a <strong>Spatial Mapping Collider</strong> then your Scene contains two sets of Surface GameObjects; one generated by each component at runtime. This is important to keep in mind for optimization purposes.
s
<strong>Note:</strong> When first generated by the Spatial Mapping system, all <strong>Surface GameObjects</strong> are assigned to the <strong>Default Layer</strong>. However, it is good practice to assign your GameObjects to a specific Layer, because raycasting is an expensive calculation to perform. By using Layers, you can filter which GameObjects you are doing your raycast calculations against, and so optimise performance. If you don’t have a lot of complicated Meshes on your <strong>Default</strong> Layer, then doing a raycast test for collision won’t have a large performance cost. However, it is best to organize your GameObjects into Layers to reduce the complexity of raycast tests when doing collisions. You can change the layer assigned to all Surface GameObjects generated by a specific <strong>Spatial Mapping Collider</strong> component by changing the <strong>Collider Settings</strong> &gt; <strong>Mesh Layer</strong> property.</p>
<p><a name="ExampleScript"></a></p>
<h3 id="example-script-spatialsurface-raycast-on-a-tap-gesture-event">Example script: SpatialSurface raycast on a tap gesture event</h3>
<p>The following example demonstrates how to raycast against GameObjects on the <strong>SpatialSurface</strong> Layer and use a GestureRecognizer to initiate this raycast upon detection of a tap gesture event.</p>
<pre><code>
using UnityEngine;
using System.Collections; 

//Required for Gesture Recognizer
using UnityEngine.XR.WSA.Input;


public class CustomLayerCollision : MonoBehaviour
{

    //use this to capture gesture events

    private GestureRecognizer GR_recognizer;

    void Start()
    {
        //Initialise the GestureRecognizer

        GR_recognizer = new GestureRecognizer();

        //Initiate gesture capture

        GR_recognizer.StartCapturingGestures();

        //Tell the GestureRecognizer which events to listen for

        GR_recognizer.SetRecognizableGestures(GestureSettings.Tap);

        //Subscribe the Tapped event to the DetectCollisions method

        //This makes this method be called any time the GestureRecognizer detects a tap event

        GR_recognizer.Tapped += DetectCollisions;

        //When the user initiates a tap gesture, the DetectCollisions   

        //method is called by the Tapped event delegate to do a collision test using Raycasting

        //See [GestureRecognizer API reference](ScriptRef:XR.WSA.Input.GestureRecognizer.html) for more details
    }
    //Method to fire a raycast on a Tap event
    public void DetectCollisions(TappedEventArgs tapEvent)
    {
        // Raycast against all GameObjects that are on either the
        // spatial Surface or UI layers.

        int layerMask = 1 &lt;&lt; LayerMask.NameToLayer(&quot;SpatialSurface&quot;);

        //construct a Ray using the position and forward direction of the User’s head
        Ray GazeRay = new Ray(tapEvent.headPose.position, tapEvent.headPose.forward);

        //Raycast using constructed Ray from Gaze and store collisions in array hits

        RaycastHit[] hits = Physics.RaycastAll(GazeRay, float.MaxValue, layerMask);

        if (hits.Length &gt; 0)
        {
            foreach (RaycastHit hit in hits)
            {
                Debug.Log(string.Format(&quot;Hit Object **\&quot;**{0}**\&quot;** at position **\&quot;**{1}**\&quot;**&quot;, hit.collider.gameObject, hit.point));
            }
        }
        else
        {
            Debug.Log(&quot;Nothing was hit.&quot;);
        }
    }
}
</code></pre><p>See documentation on <a href="Layers.html">Layers</a> and <a href="CameraRays.html">Raycasting from Camera</a> for more information.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Copyright © 2019 Unity Technologies<br>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
