<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],   j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-MC35ML');</script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
  
    <title>Configuring for Apple App Store and Mac App Store | Unity Technologies Developer Guide </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Configuring for Apple App Store and Mac App Store | Unity Technologies Developer Guide ">
    <meta name="generator" content="docfx 2.40.7.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" class="manual">
	<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MC35ML" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
        
        		<div class="back-to-unity-group">
        			<a class="back-to-unity" href="http://docs.unity3d.com/">docs.unity3d.com</a>
        		</div>
        
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items"></div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="configuring-for-apple-app-store-and-mac-app-store">Configuring for Apple App Store and Mac App Store</h1>

<h2 id="introduction">Introduction</h2>
<p>This guide describes the process of establishing the digital records and relationships necessary for a Unity game to interact with an In-App Purchase Store. The <a href="UnityIAP.html">Unity IAP</a> purchasing API is targeted. </p>
<p>In-App Purchase (IAP) is the process of transacting money for digital goods. A platform&#39;s Store allows purchase of Products, representing digital goods. These Products have an Identifier, typically of string datatype. Products have Types to represent their durability: <em>subscription</em>, <em>consumable</em> (capable of being rebought), and <em>non-consumable</em> (capable of being bought only once) are the most common. </p>
<h2 id="apple-app-store">Apple App Store</h2>
<h3 id="getting-started">Getting Started</h3>
<ol>
<li><p>Write a game implementing Unity IAP. See <a href="UnityIAPInitialization.html">Unity IAP Initialization</a> and <a href="https://unity3d.com/learn/tutorials/topics/analytics/integrating-unity-iap-your-game-beta">Integrating Unity IAP with your game</a>.</p>
</li>
<li><p>Keep the game&#39;s product identifiers on-hand for use in iTunes Connect later.</p>
<p> <img src="../uploads/Main/IAPAppleImage0.png" alt=""></p>
</li>
</ol>
<h3 id="register-the-application">Register the Application</h3>
<ol>
<li><p>In the <a href="https://developer.apple.com/account">Apple Developer Center</a>, navigate to the appropriate Identifiers section. </p>
</li>
<li><p>Add a new App ID to create a fundamental application entity with Apple. </p>
<p> <strong>NOTE:</strong> Use an Explicit App ID. Wildcard App IDs (com.example.*) cannot be used for applications that use In-App Purchases. </p>
<p> <strong>NOTE:</strong> The App ID is available to use in iTunes Connect after you create it in the Developer Center.</p>
<p> <img src="../uploads/Main/IAPAppleImage1.png" alt=""></p>
</li>
<li><p>Navigate to <a href="https://itunesconnect.apple.com">iTunes Connect</a> and create an App, to establish a Store relationship with your game. </p>
<p> <img src="../uploads/Main/IAPAppleImage2.png" alt=""> </p>
</li>
<li><p>Use the newly created App ID for the app&#39;s Bundle ID. </p>
<p> <img src="../uploads/Main/IAPAppleImage3.png" alt=""></p>
</li>
</ol>
<h3 id="add-in-app-purchases">Add In-App Purchases</h3>
<ol>
<li><p>Choose <strong>Features</strong> and add a new In-App Purchase with the plus (&quot;+&quot;) button. </p>
<p> <img src="../uploads/Main/IAPAppleImage4.png" alt=""></p>
</li>
<li><p>Choose a <a href="UnityIAPDefiningProducts.html">Product Type</a>. </p>
<p> <img src="../uploads/Main/IAPAppleImage5.jpg" alt=""></p>
</li>
<li><p>Specify the Product Identifier, and complete other fields as requested.</p>
<p> <strong>NOTE:</strong> The &quot;Product ID&quot; here is the same identifier used in the game source code, added to the <a href="http://docs.unity3d.com/Documentation/ScriptReference/Purchasing.ConfigurationBuilder.html">Unity IAP ConfigurationBuilder</a> instance via <strong>AddProduct()</strong> or <strong>AddProducts()</strong>. </p>
<p> <strong>NOTE:</strong> When targeting multiple Apple device groups (for example, shipping on both iOS and Mac) Apple requires usage of different, unique product identifiers for each distinct device group. Use <a href="http://docs.unity3d.com/ScriptReference/Purchasing.IDs-ctor.html">Unity IAP&#39;s Purchasing.IDs</a> class and define a one-to-many mapping Product IDs to the store-specific identifiers, and pass that mapping in when initializing IAP. </p>
<p> <img src="../uploads/Main/IAPAppleImage6.jpg" alt=""></p>
</li>
<li><p>Result:</p>
<p> <img src="../uploads/Main/IAPAppleImage7.png" alt=""></p>
</li>
</ol>
<h3 id="test-iap">Test IAP</h3>
<ol>
<li><p>Create <strong>Sandbox Testers</strong> using iTunes Connect for use on your test device&#39;s iTunes Account. To do this, navigate to <strong>iTunes Connect &gt; Users and Roles</strong>, and choose the plus (&quot;+&quot;) button. You must review <a href="https://developer.apple.com/library/ios/documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/Chapters/SettingUpUserAccounts.html#/apple_ref/doc/uid/TP40011225-CH25-SW9">Apple&#39;s Sandbox Tester documentation</a> as there are several additional important usage notes, and you must use a real email address to create Testers. </p>
<p> <strong>NOTE:</strong> See the <a href="UnityIAPiOSMAS.html">iOS and Mac App Store guides</a> for additional details. </p>
<p> <strong>TIP:</strong> (*) To simplify managing the email address, use an email service capable of sub-addressing (emailaccount+subaddress@example.com) such as Gmail, iCloud, and Outlook.com. This allows one email account to receive email for multiple sub-addresses. </p>
<p> <img src="../uploads/Main/IAPAppleImage8.png" alt=""></p>
</li>
<li><p>Walk through the user creation wizard. </p>
<p> <img src="../uploads/Main/IAPAppleImage9.png" alt=""></p>
</li>
<li><p>Build the Xcode project for your game using Unity.</p>
<p> <strong>NOTE:</strong> Ensure the Bundle Identifier in Unity (<strong>Edit</strong> &gt; <strong>Project Settings</strong>, then select the <strong>Other Settings</strong> category, and navigate to the <strong>Bundle Identifier</strong> section) matches that used in iTunes Connect.</p>
</li>
<li><p>Then, in your game&#39;s Xcode project, ensure the Team (Project Navigator &gt; your game Target &gt; General &gt; Identity &gt; Team) is set to that of your Apple Developer account.</p>
<p> <img src="../uploads/Main/IAPAppleImage10.png" alt=""></p>
</li>
</ol>
<h4 id="for-ios">For iOS</h4>
<ol>
<li><p>Using the target iOS device, sign out of any existing Apple ID accounts. Only sign in as the Sandbox Tester when prompted by the app, later. Any subsequent purchases are routed through the Apple Sandbox instead of the Production Store.</p>
<p> <img src="../uploads/Main/IAPAppleImage11.png" alt=""></p>
</li>
<li><p>Build and run the game on your iOS device. <code>UnityPurchasing.Initialize()</code> succeeds if everything has been correctly configured. See <a href="http://docs.unity3d.com/ScriptReference/Purchasing.UnityPurchasing.Initialize.html">Unity Purchasing Initialization</a> </p>
</li>
<li><p>Test the IAP by making a purchase in the game on the device. A modified purchase dialog displays, explaining that this purchase is being performed in the Sandbox Environment. Use the Sandbox User Tester password when prompted for purchase. </p>
<p> WARNING: If the indicator is not present, then an account is charged real money for the product.</p>
<p> <img src="../uploads/Main/IAPAppleImage12.png" alt=""></p>
</li>
</ol>
<h4 id="for-mac">For Mac</h4>
<ol>
<li><p>When building a desktop Mac build, select <strong>Mac App Store Validation</strong> within Unity&#39;s Mac <strong>Player</strong> settings.</p>
</li>
<li><p>Once you have built your App, update its <code>info.plist</code> file with your bundle identifier and version strings. Right click on the .app file and click <strong>Show Package Contents</strong>, locate the <code>info.plist</code> file and update the <code>CFBundleIdentifier</code> string to your application&#39;s bundle identifier.</p>
</li>
<li><p>Sign, package, and install your application. Run the following commands from an OSX terminal, filling in &quot;your.app&quot; and &quot;your.pkg&quot; appropriately.</p>
<p> <strong>TIP:</strong> To sign the bundle, you may first need to remove the Contents.meta file if it exists: <code>your.app/Contents/Plugins/unitypurchasing.bundle/Contents.meta</code></p>
<ol>
<li><p><code>codesign -f --deep -s &quot;3rd Party Mac Developer Application: &quot; your.app/Contents/Plugins/unitypurchasing.bundle</code></p>
</li>
<li><p><code>codesign -f --deep -s &quot;3rd Party Mac Developer Application: &quot; your.app</code></p>
</li>
<li><p><code>productbuild --component your.app /Applications --sign &quot;3rd Party Mac Developer Installer: &quot; your.pkg</code></p>
</li>
</ol>
</li>
<li><p>To install the package correctly, delete the unpackaged .app file before running the newly created package and installing it.</p>
</li>
<li><p>Launch the app from the <em>Applications</em> folder. The first time you do so, you are prompted to enter your iTunes account details, for which you can then make test purchases against the sandbox environment.</p>
</li>
</ol>
<p>See pages on <a href="UnityIAPiOSMAS.html">iOS and Mac Extended Functionality</a> and <a href="HOWTO-PortToAppleMacStore.html">Delivering applications to the Apple Mac Store</a> for additional details on Apple App Store testing and signing. </p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Copyright © 2019 Unity Technologies<br>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
