<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],   j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-MC35ML');</script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
  
    <title>Gradle for Android | Unity Technologies Developer Guide </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Gradle for Android | Unity Technologies Developer Guide ">
    <meta name="generator" content="docfx 2.40.7.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" class="manual">
	<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MC35ML" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
        
        		<div class="back-to-unity-group">
        			<a class="back-to-unity" href="http://docs.unity3d.com/">docs.unity3d.com</a>
        		</div>
        
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items"></div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="gradle-for-android">Gradle for Android</h1>

<p>Gradle is an Android build system which automates a number of build processes. This automation means that many common build errors are less likely to occur. Most notably in Unity, it reduces the method reference count in DEX (Dalvik Executable format) files, meaning that you are less likely to come across DEX limit problems. However, due to the differences between Gradle and the default Unity Android build system, some existing projects may be hard to convert to Gradle.</p>
<p>You can either build the output package (APK) using the Gradle build system in Unity, or export the Gradle project and build it in an external tool (such as Android Studio).</p>
<p>To learn more, see Gradle’s resources on <a href="https://gradle.org/getting-started-android-build/">Getting Started with Gradle for Android Build</a>.</p>
<h2 id="building-with-gradle-for-android">Building with Gradle for Android</h2>
<p>To build your Android build with Gradle in Unity: </p>
<ol>
<li>In the Unity Editor, open the  <a href="BuildSettings.html">Build Settings</a> window (menu: <strong>File</strong> &gt; <strong>Build Settings...</strong>) </li>
<li>In the <strong>Platform</strong> list, select <strong>Android</strong> </li>
<li>Set the Build System drop-down to <strong>Gradle (new)</strong>, then click <strong>Build</strong></li>
</ol>
<p><img src="../uploads/Main/gradlebuildsettings.png" alt="Gradle build settings"></p>
<h2 id="exporting-the-gradle-project">Exporting the Gradle project</h2>
<p>To export a Gradle project, follow the instructions above, but tick the <strong>Export Project</strong> option in the Build window before you click <strong>Build</strong>. When you click <strong>Build</strong> Unity generates a Gradle project in the specified directory rather than building the APK. Import this project into Android Studio to make additional modifications or to get full control of the build process.</p>
<p>See <a href="https://developer.android.com/studio/build/index.html">Android Studio&#39;s documentation on configuring your build</a> for more information about building an output package (APK).</p>
<h2 id="providing-a-custom-buildgradle-template">Providing a custom build.gradle template</h2>
<p>To use your own build.gradle file when building the APK from Unity, enable the <strong>Custom Gradle Template</strong> property on the <a href="class-PlayerSettingsAndroid.html">Player</a> window. 
This generates a default <code>mainTemplate.gradle</code> file for you, which you can edit. This template contains several variables that are completed] by the Unity build process, such as <code>**TARGETSDKVERSION**</code>. You would normally leave these alone.
You can also use your own <code>settings.gradle</code> file by providing a <code>settingsTemplate.gradle</code> file in your Plugins directory in the same way (although there is currently no automatic way to do this). This file is responsible for including your library projects, so unless you want to also override that process, the file should at least contain this line: </p>
<p><code>**INCLUDES**</code></p>
<p>which will be replaced by include directives to all your libraries.</p>
<h3 id="template-variables">Template Variables</h3>
<p>These variables can be used in the <code>mainTemplate.gradle</code> file:</p>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Variable:</strong></th>
<th style="text-align:left"><strong>Description:</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>DEPS</strong></td>
<td style="text-align:left">List of project dependencies; ie the libraries used.</td>
</tr>
<tr>
<td style="text-align:left"><strong>API VERSION</strong></td>
<td style="text-align:left">API version to build for (eg 25).</td>
</tr>
<tr>
<td style="text-align:left"><strong>BUILDTOOLS</strong></td>
<td style="text-align:left">SDK Build tools used (eg 25.0.1).</td>
</tr>
<tr>
<td style="text-align:left"><strong>TARGETSDKVERSION</strong></td>
<td style="text-align:left">API version to taget (eg 25).</td>
</tr>
<tr>
<td style="text-align:left"><strong>APPLICATIONID</strong></td>
<td style="text-align:left">Android Application ID (eg com.mycompany.mygame).</td>
</tr>
<tr>
<td style="text-align:left"><strong>MINIFY_DEBUG</strong></td>
<td style="text-align:left">Minify for debug builds enabled (true or false).</td>
</tr>
<tr>
<td style="text-align:left"><strong>PROGUARD_DEBUG</strong></td>
<td style="text-align:left">Use proguard for minification (true or false.)</td>
</tr>
<tr>
<td style="text-align:left"><strong>MINIFY_RELEASE</strong></td>
<td style="text-align:left">Minify for release builds enabled (true or false).</td>
</tr>
<tr>
<td style="text-align:left"><strong>PROGUARD_RELEASE</strong></td>
<td style="text-align:left">Use proguard for minification (true or false).</td>
</tr>
<tr>
<td style="text-align:left"><strong>USER_PROGUARD</strong></td>
<td style="text-align:left">Custom user proguard file (ie progard-user.txt).</td>
</tr>
<tr>
<td style="text-align:left"><strong>SIGN</strong></td>
<td style="text-align:left">Complete signingConfigs section if build is to be signed.</td>
</tr>
<tr>
<td style="text-align:left"><strong>SIGN_CONFIG</strong></td>
<td style="text-align:left">Set to ‘signingConfig signingConfig.release’ if build is signed.</td>
</tr>
<tr>
<td style="text-align:left"><strong>DIR_GRADLEPROJECT</strong></td>
<td style="text-align:left">Directory where the gradle project is created.</td>
</tr>
<tr>
<td style="text-align:left"><strong>DIR_UNITYPROJECT</strong></td>
<td style="text-align:left">Directory of your Unity project.</td>
</tr>
</tbody>
</table>
<h3 id="minification">Minification</h3>
<p>You can activate <strong>Proguard Minification</strong> under the <strong>Minify</strong> setting on the <a href="class-PlayerSettingsAndroid.html">Player</a> window. 
Note that proguard can easily strip out code that is actually needed, so often this process needs to be configured carefully. You can generate a custom <code>proguard.txt</code> file by enabling the <strong>User Proguard File</strong> setting under the same settings as a starting point. </p>
<p>See the <a href="https://www.guardsquare.com/en/proguard/manual/usage">ProGuard manual</a> for more information on Proguard.</p>
<h2 id="errors-when-building-with-gradle">Errors when building with Gradle</h2>
<p>If an error occurs during building for Android using Gradle, Unity displays an error dialog box. Click <strong>Troubleshoot</strong> to open the <a href="android-gradle-troubleshooting.html">Gradle troubleshooting</a> Unity documentation in your system’s browser.</p>
<p><img src="../uploads/Main/gradleerrorapk.png" alt="Unity’s Grade build error dialog box"></p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Copyright © 2019 Unity Technologies<br>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
