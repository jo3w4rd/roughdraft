<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],   j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-5V25JL6');</script>
    <script type="text/javascript">thisPackageMetaData = { name: "com.unity.addressables", version: "1.17.6-preview", displayTitle:"Addressables 1.17.6-preview", lang: "en" };</script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
  
    <title>Addressables.LoadSceneAsync | Addressables | 1.17.6-preview </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Addressables.LoadSceneAsync | Addressables | 1.17.6-preview ">
    <meta name="generator" content="docfx 2.51.0.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <link rel="stylesheet" href="../styles/version-switcher.css">
    <link rel="stylesheet" href="../styles/language-switcher.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    <meta property="unity:packageTitle" content="Addressables | 1.17.6-preview">
    <meta property="docfx:rel" content="../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" class="">
	<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5V25JL6" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
        
        		<div class="back-to-unity-group">
        			<a class="back-to-unity" href="http://docs.unity3d.com/">docs.unity3d.com</a>
        		</div>
        
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items"></div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10" id="main_content">
          <div id="breadcrumb_placeholder"></div>
            <article class="content wrap" id="_content" data-uid="addressables-api-load-scene-async">
<h1 id="addressablesloadsceneasync">Addressables.LoadSceneAsync</h1>

<h4 id="api">API</h4>
<ul>
<li><code>AsyncOperationHandle&lt;SceneInstance&gt; LoadSceneAsync(object key, LoadSceneMode loadMode = LoadSceneMode.Single, bool activateOnLoad = true, int priority = 100)</code></li>
<li><code>AsyncOperationHandle&lt;SceneInstance&gt; LoadSceneAsync(IResourceLocation location, LoadSceneMode loadMode = LoadSceneMode.Single, bool activateOnLoad = true, int priority = 100)</code></li>
</ul>
<h4 id="returns">Returns</h4>
<p><code>AsyncOperationHandle&lt;SceneInstance&gt;</code>: An <code>AsyncOperationHandle</code> for the scene load operation.  The result is the loaded <code>SceneInstance</code>.</p>
<h4 id="description">Description</h4>
<p>Load a scene asynchronously.  See the full API documentation of <a class="xref" href="../api/UnityEngine.AddressableAssets.Addressables.html"><code>Addressables.LoadSceneAsync</code></a>.</p>
<p><code>Addressables.LoadSceneAsync</code> uses a key or <code>IResourceLocation</code> to load an Addressable scene.  The other parameters, such as <code>loadMode</code>, <code>activateOnLoad</code>, and <code>priority</code> correlate to parameters used by the <code>SceneManager.LoadSceneAsync</code>.  More information about <code>priority</code> and <code>activateOnLoad</code> (called <code>allowSceneActivation</code> by <code>AsyncOperation</code>) can be found in the full API documentation for <a href="https://docs.unity3d.com/ScriptReference/SceneManagement.SceneManager.LoadSceneAsync.html"><code>SceneManagement.SceneManager.LoadSceneAsync</code></a>,</p>
<p>Be aware, if <code>activateOnLoad</code> is set to <code>false</code>, the entire async operation queue is stalled behind the blocked scene load operation.  This is not limited to scene load requests.  Any asynchronous request is blocked until the scene is allowed to activate.  This means <code>yield retruns</code> and callbacks cannot trigger until the queue is unblocked.  If multiple scene load operations are started with <code>activateOnLoad=false</code> it can lead to inconsistent behavior.  For example,</p>
<pre><code>IEnumerator Start()
{
    AsyncOperationHandle&lt;SceneInstance&gt; handle1 = Addressables.LoadSceneAsync(&quot;level1&quot;, LoadSceneMode.Additive, false);
    AsyncOperationHandle&lt;SceneInstance&gt; handle2 = Addressables.LoadSceneAsync(&quot;other&quot;, LoadSceneMode.Additive, false);

    yield return handle1;  //will sometimes trigger, sometimes not
    yield return handle2;  //will never trigger
}
</code></pre><p>Whichever of the two loads gets to &quot;loaded but not activated&quot; first blocks the queue and fires its completion/yield/task events. In this case, if &quot;level1&quot; loads first, its <code>yield return</code> proceeds, but execution is stuck on <code>handle2</code> forever.  If &quot;other&quot; loads first, then even though <code>handle2</code> is done, <code>handle1</code> cannot finish. Which scene loads first has nothing to do with which one is requested first in code.</p>
<p>While <code>Addressables.LoadSceneAsync</code> is asynchronous, it should be noted that the final part of scene loading requires operation on the main thread.  This can be blocking.</p>
<p>If the <code>loadMode</code> passed in is <code>LoadSceneMode.Single</code> then <code>Resources.UnloadUnusedAssets</code> is called to clear memory.  This can cause hitching.</p>
<h4 id="code-sample">Code Sample</h4>
<pre><code>public IEnumerator Start()
{
    //Simple use case for loading a scene with the key &quot;level1&quot;
    AsyncOperationHandle&lt;SceneInstance&gt; handle = Addressables.LoadSceneAsync(&quot;level1&quot;);
    yield return handle;

    //....
}
</code></pre><pre><code>IEnumerator Start()
{
    //Not allowing scene activation immediately
    AsyncOperationHandle&lt;SceneInstance&gt; handle = Addressables.LoadSceneAsync(&quot;level1&quot;, LoadSceneMode.Additive, false);
    yield return handle;

    //...

    //One way to handle manual scene activation.
    if (handle.Status == AsyncOperationStatus.Succeeded)
        yield return handle.Result.ActivateAsync();

    //...
}
</code></pre><h4 id="dontdestroyonload">DontDestroyOnLoad</h4>
<p>If a scene is loaded through <code>Addressables</code> and a <code>GameObject</code> is moved out of that loaded scene, know that releasing that scene load handle unloads the underlying <code>AssetBundle</code> and can affect the moved <code>GameObjects</code>.  A common use case is marking a <code>GameObject</code> as <code>DontDestroyOnLoad</code>.  Since <code>Addressables</code> has no way of knowing an object was moved out of the loaded scene, it is unable to track the moved objects with the underlying reference count on the loaded <code>AssetBundle</code>. </p>
<p>Two solutions for this problem are:</p>
<ul>
<li>Make any object you want to mark <code>DontDestroyOnLoad</code> its own <code>Addressable</code> asset and load it independently.</li>
<li>Call <code>Addressables.ResourceManager.Acquire</code> on the <code>AsyncOperationHandle&lt;SceneInstance&gt;</code> used to load the scene before unloading the scene.  This bumps the reference count and keeps the entire <code>AssetBundle</code> loaded into memory after the scene is unloaded.  You are responsible for releasing the <code>AsyncOperationHandle&lt;SceneInstance&gt;</code> after <code>Acquire</code> has been called.</li>
</ul>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Copyright © 2020 Unity Technologies<br>Generated by <strong>DocFX</strong></span> on Tuesday, March 30, 2021
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
    <script type="text/javascript" src="../styles/metadata-collector.js"></script>
    <script type="text/javascript" src="../styles/version-switcher.js"></script>
    <script type="text/javascript" src="../styles/language-switcher.js"></script>
  </body>
</html>
