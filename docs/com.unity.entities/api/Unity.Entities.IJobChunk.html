<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],   j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-5V25JL6');</script>
    <script type="text/javascript">thisPackageMetaData = { version: "0.7.0-preview.8", displayTitle:"Unity Entities Documentation 0.7.0-preview.8" };</script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
  
    <title>Interface IJobChunk
   | Unity Entities Documentation | 0.7.0-preview.8 </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Interface IJobChunk
   | Unity Entities Documentation | 0.7.0-preview.8 ">
    <meta name="generator" content="docfx 2.40.12.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <link rel="stylesheet" href="../styles/version-switcher.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    <meta property="unity:packageTitle" content="Unity Entities Documentation | 0.7.0-preview.8">
    <meta property="docfx:rel" content="../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" class="">
	<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5V25JL6" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
        
        		<div class="back-to-unity-group">
        			<a class="back-to-unity" href="http://docs.unity3d.com/">docs.unity3d.com</a>
        		</div>
        
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items"></div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10" id="main_content">
          <div id="breadcrumb_placeholder"></div>
            <article class="content wrap" id="_content" data-uid="Unity.Entities.IJobChunk">
  
  
  <h1 id="Unity_Entities_IJobChunk" data-uid="Unity.Entities.IJobChunk">Interface IJobChunk
  </h1>
  <div class="markdown level0 summary"><p>IJobChunk is a type of <a href="https://docs.unity3d.com/ScriptReference/Unity.Jobs.IJob.html">Job</a> that iterates over
a set of <a class="xref" href="Unity.Entities.ArchetypeChunk.html">ArchetypeChunk</a> instances.</p>
</div>
  <div class="markdown level0 conceptual"></div>
  <h6><strong>Namespace</strong>: <a class="xref" href="Unity.Entities.html">Unity.Entities</a></h6>
  <!--h6><strong>Assembly</strong>: solution.dll</h6-->
  <h5 id="Unity_Entities_IJobChunk_syntax">Syntax</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public interface IJobChunk</code></pre>
  </div>
  <h5 id="Unity_Entities_IJobChunk_remarks"><strong>Remarks</strong></h5>
  <div class="markdown level0 remarks"><p>Create and schedule an IJobChunk Job inside the OnUpdate() function of a <a class="xref" href="Unity.Entities.SystemBase.html">SystemBase</a> implementation.
The Job component system calls
the Execute function once for each <a class="xref" href="Unity.Entities.ArchetypeChunk.html">ArchetypeChunk</a> found by the <a class="xref" href="Unity.Entities.EntityQuery.html">EntityQuery</a> used to
schedule the Job.</p>
<p>To pass data to the Execute function beyond the parameters of the Execute() function, add public fields to the
IJobChunk struct declaration and set those fields immediately before scheduling the Job. You must pass the
component type information for any components that the Job reads or writes using a field of type,
<a class="xref" href="Unity.Entities.ArchetypeChunkComponentType-1.html">ArchetypeChunkComponentType&lt;T&gt;</a>. Get this type information by calling the appropriate
<a class="xref" href="Unity.Entities.ComponentSystemBase.html#Unity_Entities_ComponentSystemBase_GetArchetypeChunkComponentType__1_System_Boolean_">GetArchetypeChunkComponentType&lt;T&gt;(Boolean)</a> function for the type of
component.</p>
<p>For more information see <a class="xref" href="../manual/chunk_iteration_job.html">Using IJobChunk</a>.
<example><p>
<pre><code source="../DocCodeSamples.Tests/ChunkIterationJob.cs" region="basic-ijobchunk">    [GenerateAuthoringComponent]
public struct Target : IComponentData
{
   public Entity entity;
}

public class ChaserSystem : SystemBase
{
   private EntityQuery query; // Initialized in Oncreate()

   [BurstCompile]
   private struct ChaserSystemJob : IJobChunk
   {
       // Read-write data in the current chunk
       public ArchetypeChunkComponentType&lt;Translation> PositionTypeAccessor;

       // Read-only data in the current chunk
       [ReadOnly]
       public ArchetypeChunkComponentType&lt;Target> TargetTypeAccessor;

       // Read-only data stored (potentially) in other chunks
       [ReadOnly]
       //[NativeDisableParallelForRestriction]
       public ComponentDataFromEntity&lt;LocalToWorld> EntityPositions;

       // Non-entity data
       public float deltaTime;

       public void Execute(ArchetypeChunk chunk, int chunkIndex, int firstEntityIndex)
       {
           NativeArray&lt;Translation> positions = chunk.GetNativeArray&lt;Translation>(PositionTypeAccessor);
           NativeArray&lt;Target> targets = chunk.GetNativeArray&lt;Target>(TargetTypeAccessor);

           for (int i = 0; i &lt; positions.Length; i++)
           {
               Entity targetEntity = targets[i].entity;
               float3 targetPosition = EntityPositions[targetEntity].Position;
               float3 chaserPosition = positions[i].Value;

               float3 displacement = (targetPosition - chaserPosition);
               positions[i] = new Translation { Value = chaserPosition + displacement * deltaTime };
           }
       }
   }

   protected override void OnCreate()
   {
       query = this.GetEntityQuery(typeof(Translation), ComponentType.ReadOnly&lt;Target>());
   }

   protected override void OnUpdate()
   {
       var job = new ChaserSystemJob();
       job.PositionTypeAccessor = this.GetArchetypeChunkComponentType&lt;Translation>(false);
       job.TargetTypeAccessor = this.GetArchetypeChunkComponentType&lt;Target>(true);

       job.EntityPositions = this.GetComponentDataFromEntity&lt;LocalToWorld>(true);
       job.deltaTime = this.Time.DeltaTime;

       this.Dependency = job.Schedule(query, this.Dependency);
   }
}</code></pre>
<p></example></p>
</div>
  <h3 id="methods">Methods
  </h3>
  <span class="small pull-right mobile-hide">
    <span class="divider">|</span>
    <a href="https://github.com/Unity-Technologies/dots/blob/docs-systembase-changes/Samples/Packages/com.unity.entities@0.7/package/Unity.Entities/IJobChunk.cs">Improve this Doc</a>
  </span>
  
  <a id="Unity_Entities_IJobChunk_Execute_" data-uid="Unity.Entities.IJobChunk.Execute*"></a>
  <h4 id="Unity_Entities_IJobChunk_Execute_Unity_Entities_ArchetypeChunk_System_Int32_System_Int32_" data-uid="Unity.Entities.IJobChunk.Execute(Unity.Entities.ArchetypeChunk,System.Int32,System.Int32)">Execute(ArchetypeChunk, Int32, Int32)</h4>
  <div class="markdown level1 summary"><p>Implement the Execute() function to perform a unit of work on an <a class="xref" href="Unity.Entities.ArchetypeChunk.html">ArchetypeChunk</a>.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">void Execute(ArchetypeChunk chunk, int chunkIndex, int firstEntityIndex)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Unity.Entities.ArchetypeChunk.html">ArchetypeChunk</a></td>
        <td><span class="parametername">chunk</span></td>
        <td><p>The current chunk.</p>
</td>
      </tr>
      <tr>
        <td><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.int32">Int32</a></td>
        <td><span class="parametername">chunkIndex</span></td>
        <td><p>The index of the current chunk within the list of all chunks found by the
Job&apos;s <a class="xref" href="Unity.Entities.EntityQuery.html">EntityQuery</a>. Note that chunks are not processed in index order, except by chance.</p>
</td>
      </tr>
      <tr>
        <td><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.int32">Int32</a></td>
        <td><span class="parametername">firstEntityIndex</span></td>
        <td><p>The index of the first entity in the current chunk within the list of all
entities in all the chunks found by the Job&apos;s <a class="xref" href="Unity.Entities.EntityQuery.html">EntityQuery</a>.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 id="Unity_Entities_IJobChunk_Execute_Unity_Entities_ArchetypeChunk_System_Int32_System_Int32__remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>The Job component system calls the Execute function once for each <a class="xref" href="Unity.Entities.EntityArchetype.html">EntityArchetype</a>
found by the <a class="xref" href="Unity.Entities.EntityQuery.html">EntityQuery</a> used to schedule the Job.</p>
</div>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/Unity-Technologies/dots/blob/docs-systembase-changes/Samples/Packages/com.unity.entities@0.7/package/Unity.Entities/IJobChunk.cs" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Copyright © 2020 Unity Technologies<br>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
    <script type="text/javascript" src="../styles/metadata-collector.js"></script>
    <script type="text/javascript" src="../styles/version-switcher.js"></script>
  </body>
</html>
