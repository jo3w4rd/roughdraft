<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],   j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-5V25JL6');</script>
    <script type="text/javascript">thisPackageMetaData = { name: "com.unity.entities", version: "0.17.0-preview.18", displayTitle:"Entities 0.17.0-preview.18", lang: "en" };</script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
  
    <title>Property Job
   | Entities | 0.17.0-preview.18 </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Property Job
   | Entities | 0.17.0-preview.18 ">
    <meta name="generator" content="docfx 2.51.0.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <link rel="stylesheet" href="../styles/version-switcher.css">
    <link rel="stylesheet" href="../styles/language-switcher.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    <meta property="unity:packageTitle" content="Entities | 0.17.0-preview.18">
    <meta property="docfx:rel" content="../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" class="">
	<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5V25JL6" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
        
        		<div class="back-to-unity-group">
        			<a class="back-to-unity" href="http://docs.unity3d.com/">docs.unity3d.com</a>
        		</div>
        
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items"></div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10" id="main_content">
          <div id="breadcrumb_placeholder"></div>
            <article class="content wrap" id="_content" data-uid="Unity.Entities.SystemBase.Job*">

<h1 id="Unity_Entities_SystemBase_Job_" data-uid="Unity.Entities.SystemBase.Job*">Property Job
</h1>
<div class="markdown level0 summary"></div>
<div class="markdown level0 conceptual"></div>



<a id="Unity_Entities_SystemBase_Job_" data-uid="Unity.Entities.SystemBase.Job*"></a>
<h4 id="Unity_Entities_SystemBase_Job" data-uid="Unity.Entities.SystemBase.Job">Job</h4>
<div class="markdown level1 summary"><p>Provides a mechanism for defining and executing an [IJob].</p>
</div>
<div class="markdown level1 conceptual"></div>
<h5 class="decalaration">Declaration</h5>
<div class="codewrapper">
  <pre><code class="lang-csharp hljs">protected LambdaSingleJobDescription Job { get; }</code></pre>
</div>
<h5 class="propertyValue">Property Value</h5>
<table class="table table-bordered table-striped table-condensed">
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><span class="xref">Unity.Entities.CodeGeneratedJobForEach.LambdaSingleJobDescription</span></td>
      <td></td>
    </tr>
  </tbody>
</table>
<h5 id="Unity_Entities_SystemBase_Job_remarks">Remarks</h5>
<div class="markdown level1 remarks"><p>The Jobs property provides a convenient mechanism for implementing single jobs. Unity uses a compiler
extension to convert the job description you create with Job.WithCode into efficient, executable code that
(optionally) runs in a background thread.</p>
<example>
<pre><code class="lang-csharp" source="../DocCodeSamples.Tests/LambdaJobExamples.cs" region="job-with-code-example">public class RandomSumJob : SystemBase
{
   private uint seed = 1;

   protected override void OnUpdate()
   {
       Random randomGen = new Random(seed++);
       NativeArray&lt;float> randomNumbers
           = new NativeArray&lt;float>(500, Allocator.TempJob);

       Job.WithCode(() =>
       {
           for (int i = 0; i &lt; randomNumbers.Length; i++)
           {
               randomNumbers[i] = randomGen.NextFloat();
           }
       }).Schedule();

       // To get data out of a job, you must use a NativeArray
       // even if there is only one value
       NativeArray&lt;float> result
           = new NativeArray&lt;float>(1, Allocator.TempJob);

       Job.WithCode(() =>
       {
           for (int i = 0; i &lt; randomNumbers.Length; i++)
           {
               result[0] += randomNumbers[i];
           }
       }).Schedule();

       // This completes the scheduled jobs to get the result immediately, but for
       // better efficiency you should schedule jobs early in the frame with one
       // system and get the results late in the frame with a different system.
       this.CompleteDependency();
       UnityEngine.Debug.Log(&quot;The sum of &quot;
           + randomNumbers.Length + &quot; numbers is &quot; + result[0]);

       randomNumbers.Dispose();
       result.Dispose();
   }
}</code></pre>
</example>

<p>Implement your lambda function inside the <code>Job.WithCode(lambda)</code> function. The lambda function cannot
take any parameters. You can capture local variables.</p>
<ul>
<li><code>Schedule()</code> -- executes the lambda function as a single job.</li>
<li><code>Run()</code> -- executes immediately on the main thread. Immediately before it invokes <code>Run()</code> the system
 completes all jobs with a <a href="https://docs.unity3d.com/ScriptReference/Unity.Jobs.JobHandle.html">JobHandle</a> in the system <a class="xref" href="Unity.Entities.SystemBase.Dependency.html#Unity_Entities_SystemBase_Dependency">Dependency</a> property as well as any
 jobs with a <a href="https://docs.unity3d.com/ScriptReference/Unity.Jobs.JobHandle.html">JobHandle</a> passed as a dependency to <code>Run()</code> as an (optional) parameter.</li>
</ul>
<p>When scheduling a job, you can pass a <a href="https://docs.unity3d.com/ScriptReference/Unity.Jobs.JobHandle.html">JobHandle</a> to set the job&apos;s dependencies explicitly and the
construction returns the updated <a href="https://docs.unity3d.com/ScriptReference/Unity.Jobs.JobHandle.html">JobHandle</a> combining the earlier dependencies with the new job. If you
do not provide a <a href="https://docs.unity3d.com/ScriptReference/Unity.Jobs.JobHandle.html">JobHandle</a>, the system uses <a class="xref" href="Unity.Entities.SystemBase.Dependency.html#Unity_Entities_SystemBase_Dependency">Dependency</a> when scheduling the job, and updates
the property to include the new job automatically.</p>
<p>You can use the additional options listed for <a class="xref" href="Unity.Entities.SystemBase.Entities.html#Unity_Entities_SystemBase_Entities">Entities.ForEach</a> with a <code>Job.WithCode</code> construction.</p>
<h5 id="capturing-variables"><strong>Capturing variables</strong></h5>
<p>You can capture local variables in the lambda function. When you execute the function using a job (by
calling <code>Schedule()</code>, <code>ScheduleParallel()</code> or <code>ScheduleSingle()</code> instead of <code>Run()</code>) there are some
restrictions on the captured variables and how you use them:</p>
<ul>
<li>Only native containers and blittable types can be captured.</li>
<li>A job can only write to captured variables that are native containers.
(To “return” a single value, create a [native array] with one element.)</li>
</ul>
<p>You can use the following functions to apply modifiers and attributes to the captured [native container]
variables, including [native arrays]:</p>
<ul>
<li><p><strong><code>WithReadOnly(myvar)</code></strong> — restricts access to the variable as read-only.</p>
</li>
<li><p><strong><code>WithDisposeOnCompletion(myvar)</code></strong> — indicates that you want captured NativeContainers or types that 
contain NativeContainers to be Disposed of after your lambda runs.</p>
</li>
<li><p><strong><code>WithNativeDisableParallelForRestriction(myvar)</code></strong> — permits multiple threads to access the same
writable native container. Parallel access is only safe when each thread only accesses its own, unique
range of elements in the container. If more than one thread accesses the same element a race condition is
created in which the timing of the access changes the result. See <a href="https://docs.unity3d.com/ScriptReference/Unity.Collections.NativeDisableParallelForRestrictionAttribute.html">NativeDisableParallelForRestriction</a>.</p>
</li>
<li><p><strong><code>WithNativeDisableContainerSafetyRestriction(myvar)</code></strong> — disables normal safety restrictions that
prevent dangerous access to the native container. Disabling safety restrictions unwisely can lead to race
conditions, subtle bugs, and crashes in your application. See <a href="https://docs.unity3d.com/ScriptReference/Unity.Collections.LowLevel.Unsafe.NativeDisableContainerSafetyRestrictionAttribute.html">NativeDisableContainerSafetyRestrictionAttribute</a>.</p>
</li>
<li><p><strong><code>WithNativeDisableUnsafePtrRestrictionAttribute(myvar)</code></strong> — Allows you to use unsafe pointers provided
by the native container. Incorrect pointer use can lead to subtle bugs, instability, and crashes in your
application. See <a href="https://docs.unity3d.com/ScriptReference/Unity.Collections.LowLevel.Unsafe.NativeDisableUnsafePtrRestrictionAttribute.html">NativeDisableUnsafePtrRestrictionAttribute</a>.</p>
</li>
</ul>
</div>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Copyright © 2020 Unity Technologies<br>Generated by <strong>DocFX</strong></span> on Wednesday, October 28, 2020
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
    <script type="text/javascript" src="../styles/metadata-collector.js"></script>
    <script type="text/javascript" src="../styles/version-switcher.js"></script>
    <script type="text/javascript" src="../styles/language-switcher.js"></script>
  </body>
</html>
