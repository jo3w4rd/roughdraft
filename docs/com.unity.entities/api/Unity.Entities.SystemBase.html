<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],   j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-5V25JL6');</script>
    <script type="text/javascript">thisPackageMetaData = { version: "0.7.0-preview.8", displayTitle:"Unity Entities Documentation 0.7.0-preview.8" };</script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
  
    <title>Class SystemBase
   | Unity Entities Documentation | 0.7.0-preview.8 </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Class SystemBase
   | Unity Entities Documentation | 0.7.0-preview.8 ">
    <meta name="generator" content="docfx 2.40.12.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <link rel="stylesheet" href="../styles/version-switcher.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    <meta property="unity:packageTitle" content="Unity Entities Documentation | 0.7.0-preview.8">
    <meta property="docfx:rel" content="../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" class="">
	<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5V25JL6" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
        
        		<div class="back-to-unity-group">
        			<a class="back-to-unity" href="http://docs.unity3d.com/">docs.unity3d.com</a>
        		</div>
        
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items"></div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10" id="main_content">
          <div id="breadcrumb_placeholder"></div>
            <article class="content wrap" id="_content" data-uid="Unity.Entities.SystemBase">
  
  
  <h1 id="Unity_Entities_SystemBase" data-uid="Unity.Entities.SystemBase">Class SystemBase
  </h1>
  <div class="markdown level0 summary"><p>Implement SystemBase to create a systems in ECS.</p>
</div>
  <div class="markdown level0 conceptual"></div>
  <div class="inheritance">
    <h5>Inheritance</h5>
    <div class="level0"><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.object">Object</a></div>
    <div class="level1"><a class="xref" href="Unity.Entities.ComponentSystemBase.html">ComponentSystemBase</a></div>
    <div class="level2"><span class="xref">SystemBase</span></div>
  </div>
  <div class="inheritedMembers">
    <h5>Inherited Members</h5>
    <div>
      <a class="xref" href="Unity.Entities.ComponentSystemBase.html#Unity_Entities_ComponentSystemBase_Enabled">ComponentSystemBase.Enabled</a>
    </div>
    <div>
      <a class="xref" href="Unity.Entities.ComponentSystemBase.html#Unity_Entities_ComponentSystemBase_EntityQueries">ComponentSystemBase.EntityQueries</a>
    </div>
    <div>
      <a class="xref" href="Unity.Entities.ComponentSystemBase.html#Unity_Entities_ComponentSystemBase_GlobalSystemVersion">ComponentSystemBase.GlobalSystemVersion</a>
    </div>
    <div>
      <a class="xref" href="Unity.Entities.ComponentSystemBase.html#Unity_Entities_ComponentSystemBase_LastSystemVersion">ComponentSystemBase.LastSystemVersion</a>
    </div>
    <div>
      <a class="xref" href="Unity.Entities.ComponentSystemBase.html#Unity_Entities_ComponentSystemBase_EntityManager">ComponentSystemBase.EntityManager</a>
    </div>
    <div>
      <a class="xref" href="Unity.Entities.ComponentSystemBase.html#Unity_Entities_ComponentSystemBase_World">ComponentSystemBase.World</a>
    </div>
    <div>
      <a class="xref" href="Unity.Entities.ComponentSystemBase.html#Unity_Entities_ComponentSystemBase_Time">ComponentSystemBase.Time</a>
    </div>
    <div>
      <a class="xref" href="Unity.Entities.ComponentSystemBase.html#Unity_Entities_ComponentSystemBase_OnCreateForCompiler">ComponentSystemBase.OnCreateForCompiler()</a>
    </div>
    <div>
      <a class="xref" href="Unity.Entities.ComponentSystemBase.html#Unity_Entities_ComponentSystemBase_OnCreate">ComponentSystemBase.OnCreate()</a>
    </div>
    <div>
      <a class="xref" href="Unity.Entities.ComponentSystemBase.html#Unity_Entities_ComponentSystemBase_OnDestroyManager">ComponentSystemBase.OnDestroyManager()</a>
    </div>
    <div>
      <a class="xref" href="Unity.Entities.ComponentSystemBase.html#Unity_Entities_ComponentSystemBase_OnCreateManager">ComponentSystemBase.OnCreateManager()</a>
    </div>
    <div>
      <a class="xref" href="Unity.Entities.ComponentSystemBase.html#Unity_Entities_ComponentSystemBase_OnStartRunning">ComponentSystemBase.OnStartRunning()</a>
    </div>
    <div>
      <a class="xref" href="Unity.Entities.ComponentSystemBase.html#Unity_Entities_ComponentSystemBase_OnStopRunning">ComponentSystemBase.OnStopRunning()</a>
    </div>
    <div>
      <a class="xref" href="Unity.Entities.ComponentSystemBase.html#Unity_Entities_ComponentSystemBase_OnDestroy">ComponentSystemBase.OnDestroy()</a>
    </div>
    <div>
      <a class="xref" href="Unity.Entities.ComponentSystemBase.html#Unity_Entities_ComponentSystemBase_ShouldRunSystem">ComponentSystemBase.ShouldRunSystem()</a>
    </div>
    <div>
      <a class="xref" href="Unity.Entities.ComponentSystemBase.html#Unity_Entities_ComponentSystemBase_GetArchetypeChunkComponentType__1_System_Boolean_">ComponentSystemBase.GetArchetypeChunkComponentType&lt;T&gt;(Boolean)</a>
    </div>
    <div>
      <a class="xref" href="Unity.Entities.ComponentSystemBase.html#Unity_Entities_ComponentSystemBase_GetArchetypeChunkComponentTypeDynamic_Unity_Entities_ComponentType_">ComponentSystemBase.GetArchetypeChunkComponentTypeDynamic(ComponentType)</a>
    </div>
    <div>
      <a class="xref" href="Unity.Entities.ComponentSystemBase.html#Unity_Entities_ComponentSystemBase_GetArchetypeChunkBufferType__1_System_Boolean_">ComponentSystemBase.GetArchetypeChunkBufferType&lt;T&gt;(Boolean)</a>
    </div>
    <div>
      <a class="xref" href="Unity.Entities.ComponentSystemBase.html#Unity_Entities_ComponentSystemBase_GetArchetypeChunkSharedComponentType__1">ComponentSystemBase.GetArchetypeChunkSharedComponentType&lt;T&gt;()</a>
    </div>
    <div>
      <a class="xref" href="Unity.Entities.ComponentSystemBase.html#Unity_Entities_ComponentSystemBase_GetArchetypeChunkEntityType">ComponentSystemBase.GetArchetypeChunkEntityType()</a>
    </div>
    <div>
      <a class="xref" href="Unity.Entities.ComponentSystemBase.html#Unity_Entities_ComponentSystemBase_GetComponentDataFromEntity__1_System_Boolean_">ComponentSystemBase.GetComponentDataFromEntity&lt;T&gt;(Boolean)</a>
    </div>
    <div>
      <a class="xref" href="Unity.Entities.ComponentSystemBase.html#Unity_Entities_ComponentSystemBase_GetBufferFromEntity__1_System_Boolean_">ComponentSystemBase.GetBufferFromEntity&lt;T&gt;(Boolean)</a>
    </div>
    <div>
      <a class="xref" href="Unity.Entities.ComponentSystemBase.html#Unity_Entities_ComponentSystemBase_RequireForUpdate_Unity_Entities_EntityQuery_">ComponentSystemBase.RequireForUpdate(EntityQuery)</a>
    </div>
    <div>
      <a class="xref" href="Unity.Entities.ComponentSystemBase.html#Unity_Entities_ComponentSystemBase_RequireSingletonForUpdate__1">ComponentSystemBase.RequireSingletonForUpdate&lt;T&gt;()</a>
    </div>
    <div>
      <a class="xref" href="Unity.Entities.ComponentSystemBase.html#Unity_Entities_ComponentSystemBase_HasSingleton__1">ComponentSystemBase.HasSingleton&lt;T&gt;()</a>
    </div>
    <div>
      <a class="xref" href="Unity.Entities.ComponentSystemBase.html#Unity_Entities_ComponentSystemBase_GetSingleton__1">ComponentSystemBase.GetSingleton&lt;T&gt;()</a>
    </div>
    <div>
      <a class="xref" href="Unity.Entities.ComponentSystemBase.html#Unity_Entities_ComponentSystemBase_SetSingleton__1___0_">ComponentSystemBase.SetSingleton&lt;T&gt;(T)</a>
    </div>
    <div>
      <a class="xref" href="Unity.Entities.ComponentSystemBase.html#Unity_Entities_ComponentSystemBase_GetSingletonEntity__1">ComponentSystemBase.GetSingletonEntity&lt;T&gt;()</a>
    </div>
    <div>
      <a class="xref" href="Unity.Entities.ComponentSystemBase.html#Unity_Entities_ComponentSystemBase_GetEntityQuery_Unity_Entities_ComponentType___">ComponentSystemBase.GetEntityQuery(ComponentType[])</a>
    </div>
    <div>
      <a class="xref" href="Unity.Entities.ComponentSystemBase.html#Unity_Entities_ComponentSystemBase_GetEntityQuery_NativeArray_Unity_Entities_ComponentType__">ComponentSystemBase.GetEntityQuery(NativeArray&lt;ComponentType&gt;)</a>
    </div>
    <div>
      <a class="xref" href="Unity.Entities.ComponentSystemBase.html#Unity_Entities_ComponentSystemBase_GetEntityQuery_Unity_Entities_EntityQueryDesc___">ComponentSystemBase.GetEntityQuery(EntityQueryDesc[])</a>
    </div>
  </div>
  <h6><strong>Namespace</strong>: <a class="xref" href="Unity.Entities.html">Unity.Entities</a></h6>
  <!--h6><strong>Assembly</strong>: solution.dll</h6-->
  <h5 id="Unity_Entities_SystemBase_syntax">Syntax</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public abstract class SystemBase : ComponentSystemBase</code></pre>
  </div>
  <h5 id="Unity_Entities_SystemBase_remarks"><strong>Remarks</strong></h5>
  <div class="markdown level0 remarks"><h3 id="systems-in-ecs">Systems in ECS</h3>
<p>A typical system operates on a set of entities that have specific components. The system identifies
the components of interest, reading and writing data, and performing other entity operations as appropriate.</p>
<p>The following example shows a basic system that iterates over entities using a <a class="xref" href="../manual/entities_job_foreach.html">Entities.ForEach</a> construction.
In this  example, the system iterates over all entities with both a Displacement and a Velocity component and
updates the Displacement based on the delta time elapsed since the last frame.</p>
<example>
<pre><code source="../DocCodeSamples.Tests/SystemBaseExamples.cs" region="basic-system">public struct Position : IComponentData
{
   public float3 Value;
}

public struct Velocity : IComponentData
{
   public float3 Value;
}

public class ECSSystem : SystemBase
{
   protected override void OnUpdate()
   {
       float dT = Time.DeltaTime; // Captured variable

       Entities
           .WithName(&quot;Update_Displacement&quot;)
           .ForEach(
               (ref Position position, in Velocity velocity) =>
               {
                   position = new Position()
                   {
                       Value = position.Value + velocity.Value * dT
                   };
               }
           )
           .ScheduleParallel();
   }
}</code></pre>
</example>

<h4 id="system-lifecycle-callbacks">System lifecycle callbacks</h4>
<p>You can define a set of system lifecycle event functions when you implement a system. The runtime invokes these
functions in the following order:</p>
<ul>
<li><a class="xref" href="Unity.Entities.ComponentSystemBase.html#Unity_Entities_ComponentSystemBase_OnCreate">OnCreate()</a> -- called when the system is created.</li>
<li><a class="xref" href="Unity.Entities.ComponentSystemBase.html#Unity_Entities_ComponentSystemBase_OnStartRunning">OnStartRunning()</a> -- before the first OnUpdate and whenever the system resumes
running.</li>
<li><a class="xref" href="Unity.Entities.SystemBase.html#Unity_Entities_SystemBase_OnUpdate">OnUpdate()</a> -- every frame as long as the system has work to do (see
<a class="xref" href="Unity.Entities.ComponentSystemBase.html#Unity_Entities_ComponentSystemBase_ShouldRunSystem">ShouldRunSystem()</a>) and the system is <a class="xref" href="Unity.Entities.ComponentSystemBase.html#Unity_Entities_ComponentSystemBase_Enabled">Enabled</a>.</li>
<li><a class="xref" href="Unity.Entities.ComponentSystemBase.html#Unity_Entities_ComponentSystemBase_OnStopRunning">OnStopRunning()</a> -- whenever the system stops updating because it finds no
entities matching its queries. Also called before OnDestroy.</li>
<li><a class="xref" href="Unity.Entities.ComponentSystemBase.html#Unity_Entities_ComponentSystemBase_OnDestroy">OnDestroy()</a> -- when the system is destroyed.</li>
</ul>
<p>All of these functions are executed on the main thread. To perform work on background threads, you can schedule
jobs from the <a class="xref" href="Unity.Entities.SystemBase.html#Unity_Entities_SystemBase_OnUpdate">OnUpdate()</a> function.</p>
<h4 id="system-update-order">System update order</h4>
<p>The runtime executes systems in the order determined by their <a class="xref" href="Unity.Entities.ComponentSystemGroup.html">ComponentSystemGroup</a>. Place a system
in a group using <a class="xref" href="Unity.Entities.UpdateInGroupAttribute.html">UpdateInGroupAttribute</a>. Use <a class="xref" href="Unity.Entities.UpdateBeforeAttribute.html">UpdateBeforeAttribute</a> and
<a class="xref" href="Unity.Entities.UpdateAfterAttribute.html">UpdateAfterAttribute</a> to specify the execution order within a group.</p>
<p>If you do not explicitly place a system in a specific group, the runtime places it in the default <a class="xref" href="Unity.Entities.World.html">World</a>
<a class="xref" href="Unity.Entities.SimulationSystemGroup.html">SimulationSystemGroup</a>. By default, all systems are discovered, instantiated, and added to the
default World. You can use the <a class="xref" href="Unity.Entities.DisableAutoCreationAttribute.html">DisableAutoCreationAttribute</a> to prevent a system from being
created automatically.</p>
<h4 id="entity-queries">Entity queries</h4>
<p>A system caches all queries created through an <a class="xref" href="../manual/entities_job_foreach.html">Entities.ForEach</a> construction, through
<a href="xref:Unity.entities.ComponentSystemBase.GetEntityQuery*">ComponentSystemBase.GetEntityQuery</a>, or through <a class="xref" href="Unity.Entities.ComponentSystemBase.html#Unity_Entities_ComponentSystemBase_RequireForUpdate_">ComponentSystemBase.RequireForUpdate</a>. By default,
the runtime only calls a system&apos;s <code>OnUpdate()</code> function when one of these cached queries finds entities. You
can use the <a class="xref" href="Unity.Entities.AlwaysUpdateSystemAttribute.html">AlwaysUpdateSystemAttribute</a> to have the system always update. Note that a system
with no queries is also updated every frame.</p>
<h4 id="entitiesforeach-and-jobwithcode-constructions">Entities.ForEach and Job.WithCode constructions</h4>
<p>The <a class="xref" href="Unity.Entities.SystemBase.html#Unity_Entities_SystemBase_Entities">Entities</a> property provides a convenient mechanism for iterating over entity
data. Using an <a class="xref" href="../manual/entities_job_foreach.html">Entities.ForEach</a> construction, you can define your entity query, specify a lambda function
to run for each entity, and either schedule the work to be done on a background thread or execute the work
immediately on the main thread. </p>
<p>The <a class="xref" href="../manual/entities_job_foreach.html">Entities.ForEach</a> construction uses a C# compiler extension to take a Linq-like syntax that describes
your intent and translate it into efficient (optionally) job-based code.  </p>
<p>The <a class="xref" href="Unity.Entities.SystemBase.html#Unity_Entities_SystemBase_Job">Job</a> property provides a similar mechanism for defining a <a href="https://docs.unity3d.com/2019.2/Documentation/Manual/JobSystem.html">C# Job</a>. You can only use
<code>Schedule()</code>to run a <a class="xref" href="../manual/entities_job_foreach.html">Job.WithCode</a> construction, which executes the lambda function as a single job.</p>
<h4 id="system-attributes">System attributes</h4>
<p>You can use a number of attributes on your SystemBase implementation to control when it updates:</p>
<ul>
<li><a class="xref" href="Unity.Entities.UpdateInGroupAttribute.html">UpdateInGroupAttribute</a> -- place the system in a <a class="xref" href="Unity.Entities.ComponentSystemGroup.html">ComponentSystemGroup</a>.</li>
<li><a class="xref" href="Unity.Entities.UpdateBeforeAttribute.html">UpdateBeforeAttribute</a> -- always update the system before another system in the same group.</li>
<li><a class="xref" href="Unity.Entities.UpdateAfterAttribute.html">UpdateAfterAttribute</a> -- always update the system after another system in the same group.</li>
<li><a class="xref" href="Unity.Entities.AlwaysUpdateSystemAttribute.html">AlwaysUpdateSystemAttribute</a> -- invoke <code>OnUpdate</code> every frame.</li>
<li><a class="xref" href="Unity.Entities.DisableAutoCreationAttribute.html">DisableAutoCreationAttribute</a> -- do not create the system automatically.</li>
<li><a class="xref" href="Unity.Entities.AlwaysSynchronizeSystemAttribute.html">AlwaysSynchronizeSystemAttribute</a> -- force a <a class="xref" href="../manual/sync_points.html">sync point</a> before invoking
<code>OnUpdate</code>.</li>
</ul>
</div>
  <h3 id="properties">Properties
  </h3>
  <span class="small pull-right mobile-hide">
    <span class="divider">|</span>
    <a href="https://github.com/Unity-Technologies/dots/blob/docs-systembase-changes/Samples/Packages/com.unity.entities/Unity.Entities/SystemBase.cs">Improve this Doc</a>
  </span>
  
  <a id="Unity_Entities_SystemBase_Dependency_" data-uid="Unity.Entities.SystemBase.Dependency*"></a>
  <h4 id="Unity_Entities_SystemBase_Dependency" data-uid="Unity.Entities.SystemBase.Dependency">Dependency</h4>
  <div class="markdown level1 summary"><p>The ECS-related data dependencies of the system.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">protected JobHandle Dependency { get; set; }</code></pre>
  </div>
  <h5 class="propertyValue">Property Value</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">JobHandle</span></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <h5 id="Unity_Entities_SystemBase_Dependency_remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>Before <a class="xref" href="Unity.Entities.SystemBase.html#Unity_Entities_SystemBase_OnUpdate">OnUpdate()</a>, the Dependency property represents the combined job handles of any job that
writes to the same components that the current system reads -- or reads the same components that the current
system writes to. When you use <a class="xref" href="../manual/entities_job_foreach.html">Entities.ForEach</a> or <a class="xref" href="../manual/entities_job_foreach.html">Job.WithCode</a>, the system uses the Dependency property
to specify a job’s dependencies when scheduling it. The system also combines the new job&apos;s <a href="https://docs.unity3d.com/ScriptReference/Unity.Jobs.JobHandle.html">JobHandle</a>
with Dependency so that any subsequent job scheduled in the system depends on the earlier jobs (in sequence).</p>
<p>The following example illustrates an <code>OnUpdate()</code> implementation that relies on implicit dependency
management. The function schedules three jobs, each depending on the previous one:</p>
<example>
<pre><code source="../DocCodeSamples.Tests/SystemBaseExamples.cs" region="simple-dependency">   protected override void OnUpdate()
   {
       Entities
           .WithName(&quot;ForEach_Job_One&quot;)
           .ForEach((ref AComponent c) =>
           {
               /*...*/
           })
           .ScheduleParallel();

       Entities
           .WithName(&quot;ForEach_Job_Two&quot;)
           .ForEach((ref AnotherComponent c) =>
           {
               /*...*/
           })
           .ScheduleParallel();

       Job
           .WithName(&quot;Job_Three&quot;)
           .WithCode(() =>
           {
               /*...*/
           })
           .Schedule();
   }</code></pre>
</example>

<p>You can opt out of this default dependency management by explicitly passing a <a href="https://docs.unity3d.com/ScriptReference/Unity.Jobs.JobHandle.html">JobHandle</a> to
<a class="xref" href="../manual/entities_job_foreach.html">Entities.ForEach</a> or <a class="xref" href="../manual/entities_job_foreach.html">Job.WithCode</a>. When you pass in a <a href="https://docs.unity3d.com/ScriptReference/Unity.Jobs.JobHandle.html">JobHandle</a>, these constructions also return a
<a href="https://docs.unity3d.com/ScriptReference/Unity.Jobs.JobHandle.html">JobHandle</a> representing the input dependencies combined with the new job. The <a href="https://docs.unity3d.com/ScriptReference/Unity.Jobs.JobHandle.html">JobHandle</a> objects of any
jobs scheduled with explicit dependencies are not combined with the system’s Dependency property. You must set the Dependency
property manually to make sure that later systems receive the correct job dependencies.</p>
<p>The following <a class="xref" href="Unity.Entities.SystemBase.html#Unity_Entities_SystemBase_OnUpdate">OnUpdate()</a> function illustrates manual dependency management. The function uses
two [Entity.ForEach] constructions that schedule jobs which do not depend upon each other, only the incoming
dependencies of the system. Then a <a class="xref" href="../manual/entities_job_foreach.html">Job.WithCode</a> construction schedules a job that depends on both of the
prior jobs, who’s dependencies are combined using [JobHandle.CombineDependencies]. Finally, the <a href="https://docs.unity3d.com/ScriptReference/Unity.Jobs.JobHandle.html">JobHandle</a>
of the last job is assigned to the Dependency property so that the ECS safety manager can propagate the
dependencies to subsequent systems.</p>
<example>
<pre><code source="../DocCodeSamples.Tests/SystemBaseExamples.cs" region="manual-dependency">   protected override void OnUpdate()
   {
       JobHandle One = Entities
           .WithName(&quot;ForEach_Job_One&quot;)
           .ForEach((ref AComponent c) =>
           {
               /*...*/
           })
           .ScheduleParallel(this.Dependency);

       JobHandle Two = Entities
           .WithName(&quot;ForEach_Job_Two&quot;)
           .ForEach((ref AnotherComponent c) =>
           {
               /*...*/
           })
           .ScheduleParallel(this.Dependency);

       JobHandle intermediateDependencies =
           JobHandle.CombineDependencies(One, Two);

       JobHandle finalDependency = Job
           .WithName(&quot;Job_Three&quot;)
           .WithCode(() =>
           {
               /*...*/
           })
           .Schedule(intermediateDependencies);

       this.Dependency = finalDependency;
   }</code></pre>
</example>

<p>You can combine implicit and explicit dependency management (by using [JobHandle.CombineDependencies]);
however, doing so can be error prone. When you set the Dependency property, the assigned <a href="https://docs.unity3d.com/ScriptReference/Unity.Jobs.JobHandle.html">JobHandle</a>
replaces any existing dependency, it is not combined with them.</p>
<p>Note that the default, implicit dependency management does not include <a class="xref" href="Unity.Entities.IJobChunk.html">IJobChunk</a> jobs.
You must manage the dependencies for IJobChunk explicitly.</p>
</div>
  <span class="small pull-right mobile-hide">
    <span class="divider">|</span>
    <a href="https://github.com/Unity-Technologies/dots/blob/docs-systembase-changes/Samples/Packages/com.unity.entities/Unity.Entities/SystemBase.cs">Improve this Doc</a>
  </span>
  
  <a id="Unity_Entities_SystemBase_Entities_" data-uid="Unity.Entities.SystemBase.Entities*"></a>
  <h4 id="Unity_Entities_SystemBase_Entities" data-uid="Unity.Entities.SystemBase.Entities">Entities</h4>
  <div class="markdown level1 summary"><p>Provides a mechanism for defining an entity query and invoking a lambda expression on each entity
selected by that query.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">protected ForEachLambdaJobDescription Entities { get; }</code></pre>
  </div>
  <h5 class="propertyValue">Property Value</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">Unity.Entities.CodeGeneratedJobForEach.ForEachLambdaJobDescription</span></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <h5 id="Unity_Entities_SystemBase_Entities_remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>The Entities property provides a convenient mechanism for implementing the most common operation
performed by systems in ECS, namely, iterating over a set of entities to read and update component
data. Entities provides a LINQ method-style syntax that you use to describe the work to be performed.
Unity uses a compiler extension to convert the description into efficient, (optionally) multi-threaded
executable code.</p>
<example>
<pre><code source="../DocCodeSamples.Tests/SystemBaseExamples.cs" region="entities-foreach-basic">       Entities
           .WithName(&quot;Update_Position&quot;) // Visible in error messages
           .WithAll&lt;LocalToWorld>() // Require the LocalToWorld component
           .ForEach(
               // Write to Displacement (ref), read Velocity (in)
               (ref Position position, in Velocity velocity) =>
               {
                   //Execute for each selected entity
                   position = new Position()
                   {
                       // dT is a captured variable
                       Value = position.Value + velocity.Value * dT
                   };
               }
           )
           .ScheduleParallel(); // Schedule as a parallel job</code></pre>
</example>

<h5 id="describing-the-entity-query"><strong>Describing the entity query</strong></h5>
<p>The components that you specify as parameters for your lambda function are automatically added to
the entity query created for an Entities.Foreach construction. You can also add a number of &quot;With&quot;
clauses to identify which entities that you want to process These clauses include:</p>
<ul>
<li><p><strong><code>WithAll</code></strong> -- An entity must have all of these component types (in addition to having all
the component types found in the lambda parameter list).</p>
</li>
<li><p><strong><code>WithAny</code></strong> -- An entity must have one or more of these component types. </p>
</li>
<li><p><strong><code>WithNone</code></strong> -- An entity must not have any of these component types.</p>
</li>
<li><p><strong><code>WithChangeFilter()</code></strong> -- Only selects entities in chunks in which the specified component might have
changed since the last time this system instance updated.</p>
</li>
<li><p><strong><code>WithSharedComponentFilter(ISharedComponentData)</code></strong> -- Only select chunks that have a specified value
for a shared component.</p>
</li>
<li><p><strong><code>WithEntityQueryOptions(EntityQueryOptions)</code></strong> -- Specify additonal options defined in a
<a class="xref" href="Unity.Entities.EntityQueryOptions.html">EntityQueryOptions</a> object.</p>
</li>
<li><p><strong><code>WithStoreEntityQueryInField(EntityQuery)</code></strong> -- Stores the <a class="xref" href="Unity.Entities.EntityQuery.html">EntityQuery</a> object generated
by the Entities.ForEach in an EntityQuery field on your system. You can use this EntityQuery object for
such purposes as getting the number of entities that will be selected by the query. Note that this function
assigns the EntityQuery instance to your field
when the system is created. This means that you can use the query before the first execution of the
lambda function.</p>
</li>
</ul>
<h5 id="defining-the-lambda-function"><strong>Defining the lambda function</strong></h5>
<p>Define the lambda function inside the <code>ForEach()</code> method of the entities property. When the system invokes the
lambda function, it assigns values to the function parameters based on the current entity. You can pass ECS
component types as parameters as well as a set of special, named parameters.</p>
<ol>
<li>Parameters passed-by-value first (no parameter modifiers)</li>
<li>Writable parameters second(<code>ref</code> parameter modifier)</li>
<li>Read-only parameters last(<code>in</code> parameter modifier)</li>
</ol>
<p>All components should use either the <code>ref</code> or the <code>in</code> parameter modifier keywords.</p>
<p>You can pass up to eight parameters to the lambda function. In addition to ECS component types, you can use
the following:</p>
<ul>
<li><p><strong><code>Entity entity</code></strong> — the Entity instance of the current entity. (The parameter can be named anything as
long as the type is Entity.)</p>
</li>
<li><p><strong><code>int entityInQueryIndex</code></strong> — the index of the entity in the list of all entities selected by the query.
Use the entity index value when you have a <a href="https://docs.unity3d.com/ScriptReference/Unity.Collections.NativeArray_1.html">native array</a> that you need to fill with a unique value for
each entity. You can use the entityInQueryIndex as the index in that array. The entityInQueryIndex should
also be used as the jobIndex for adding commands to a concurrent <a class="xref" href="Unity.Entities.EntityCommandBuffer.html">EntityCommandBuffer</a>.</p>
</li>
<li><p><strong><code>int nativeThreadIndex</code></strong> — a unique index for the thread executing the current iteration of the
lambda function. When you execute the lambda function using Run(), nativeThreadIndex is always zero.</p>
</li>
</ul>
<example>
<pre><code source="../DocCodeSamples.Tests/SystemBaseExamples.cs" region="lambda-params">                .ForEach((Entity entity,
               int entityInQueryIndex,
               ref WritableComponent aReadwriteComponent,
               in ReadonlyComponent aReadonlyComponent) =>
               {
                   /*..*/
               })</code></pre>
</example>

<h5 id="capturing-variables"><strong>Capturing variables</strong></h5>
<p>You can capture local variables in the lambda function. When you execute the function using a job (by
calling <code>ScheduleParallel()</code> or <code>ScheduleSingle()</code> instead of <code>Run()</code>) there are some restrictions on the
captured variables and how you use them:</p>
<ul>
<li>Only native containers and blittable types can be captured.</li>
<li>A job can only write to captured variables that are native containers.
(To “return” a single value, create a <a href="https://docs.unity3d.com/ScriptReference/Unity.Collections.NativeArray_1.html">native array</a> with one element.)</li>
</ul>
<p>You can use the following functions to apply modifiers and attributes to the captured <a href="https://docs.unity3d.com/ScriptReference/Unity.Collections.LowLevel.Unsafe.NativeContainerAttribute.html">native container</a>
variables, including <a href="https://docs.unity3d.com/ScriptReference/Unity.Collections.NativeArray_1.html">native arrays</a>. See <a class="xref" href="Unity.Entities.SystemBase.html#Unity_Entities_SystemBase_Job">Job.WithCode</a> for a list of these modifiers and attributes.</p>
<h5 id="executing-the-lambda-function"><strong>Executing the lambda function</strong></h5>
<p>To execute a ForEach construction, you have three options:</p>
<ul>
<li><p><strong><code>ScheduleParallel()</code></strong> -- schedules the work to be done in parallel using the <a href="https://docs.unity3d.com/2019.2/Documentation/Manual/JobSystem.html">C# Job</a> system. Each
parallel job instance processes at least one chunk of entities at a time. In other words, if all the
selected entities are in the same chunk, then only one job instance is spawned.</p>
</li>
<li><p><strong><code>ScheduleSingle()</code></strong> -- schedules the work to be done in a single job (no matter how many entities are
selected).</p>
</li>
<li><p><strong><code>Run()</code></strong> -- evaluates the entity query and invokes the lambda function for each selected entity
immediately on the main thread. Calling <code>Run()</code> completes the system <a class="xref" href="Unity.Entities.SystemBase.html#Unity_Entities_SystemBase_Dependency">Dependency</a> <a href="https://docs.unity3d.com/ScriptReference/Unity.Jobs.JobHandle.html">JobHandle</a>
before running, blocking the main thread, if necessary, while it waits for those jobs to finish.</p>
</li>
</ul>
<p>When you call ScheduleSingle() or ScheduleParallel() without parameters, then the scheduled jobs use the current
value of <a class="xref" href="Unity.Entities.SystemBase.html#Unity_Entities_SystemBase_Dependency">Dependency</a>. You can also pass a <a href="https://docs.unity3d.com/ScriptReference/Unity.Jobs.JobHandle.html">JobHandle</a> to these functions to define the dependencies
of the scheduled job. In this case, the Entities.forEach construction returns a new <a href="https://docs.unity3d.com/ScriptReference/Unity.Jobs.JobHandle.html">JobHandle</a> that adds the
scheduled job to the passed in <a href="https://docs.unity3d.com/ScriptReference/Unity.Jobs.JobHandle.html">JobHandle</a>. See <a class="xref" href="Unity.Entities.SystemBase.html#Unity_Entities_SystemBase_Dependency">Dependency</a> for more information.</p>
<h5 id="additional-options"><strong>Additional options</strong></h5>
<ul>
<li><strong><code>WithName(string)</code></strong> -— assigns the specified string as the name of the generated job class. Assigning
a name is optional, but can help identify the function when debugging and profiling.</li>
<li><strong><code>WithStructuralChanges()</code></strong> -— executes the lambda function on the main thread and disables Burst so
that you can make structural changes to your entity data within the function. For better performance, use
an <a class="xref" href="Unity.Entities.EntityCommandBuffer.html">EntityCommandBuffer</a> instead.</li>
<li><strong><code>WithoutBurst()</code></strong> —- disables Burst compilation. Use this function when your lambda function contains
code not supported by Burst.</li>
<li><strong><code>WithBurst(FloatMode, FloatPrecision, bool)</code></strong> — sets options for the Burst compiler:<ul>
<li><strong>floatMode</strong> —- sets the floating point math optimization mode.Fast mode executes faster, but
produces larger floating point error than Strict mode.Defaults to Strict. See <a href="https://docs.unity3d.com/Packages/com.unity.burst@latest?subfolder=/api/Unity.Burst.FloatMode.html">Burst FloatMode</a>.</li>
<li><strong>floatPrecision</strong> —- sets the floating point math precision. See <a href="https://docs.unity3d.com/Packages/com.unity.burst@latest?subfolder=/api/Unity.Burst.FloatPrecision.html">Burst FloatPrecision</a>.</li>
<li><strong>synchronousCompilation</strong> —- compiles the function immediately instead of scheduling the function
for compilation later.</li>
</ul>
</li>
</ul>
</div>
  <span class="small pull-right mobile-hide">
    <span class="divider">|</span>
    <a href="https://github.com/Unity-Technologies/dots/blob/docs-systembase-changes/Samples/Packages/com.unity.entities/Unity.Entities/SystemBase.cs">Improve this Doc</a>
  </span>
  
  <a id="Unity_Entities_SystemBase_Job_" data-uid="Unity.Entities.SystemBase.Job*"></a>
  <h4 id="Unity_Entities_SystemBase_Job" data-uid="Unity.Entities.SystemBase.Job">Job</h4>
  <div class="markdown level1 summary"><p>Provides a mechanism for defining and executing an [IJob].</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">protected LambdaSingleJobDescription Job { get; }</code></pre>
  </div>
  <h5 class="propertyValue">Property Value</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">Unity.Entities.CodeGeneratedJobForEach.LambdaSingleJobDescription</span></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <h5 id="Unity_Entities_SystemBase_Job_remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>The Jobs property provides a convenient mechanism for implementing single jobs. Unity uses a compiler
extension to convert the job description you create with Job.WithCode into efficient, executable code that
(optionally) runs in a background thread.</p>
<example>
<pre><code source="../DocCodeSamples.Tests/LambdaJobExamples.cs" region="job-with-code-example">    public class RandomSumJob : SystemBase
{
   private uint seed = 1;

   protected override void OnUpdate()
   {
       Random randomGen = new Random(seed++ * 100000);
       NativeArray&lt;float> randomNumbers
           = new NativeArray&lt;float>(500, Allocator.TempJob);

       Job.WithCode(() =>
       {
           for (int i = 0; i &lt; randomNumbers.Length; i++)
           {
               randomNumbers[i] = randomGen.NextFloat();
           }
       }).Schedule();

       // To get data out of a job, you must use a NativeArray
       // even if there is only one value
       NativeArray&lt;float> result
           = new NativeArray&lt;float>(1, Allocator.TempJob);

       Job.WithCode(() =>
       {
           for (int i = 0; i &lt; randomNumbers.Length; i++)
           {
               result[0] += randomNumbers[i];
           }
       }).Schedule();

       this.CompleteDependency();
       UnityEngine.Debug.Log(&quot;The sum of &quot;
                             + randomNumbers.Length + &quot; numbers is &quot; + result[0]);

       randomNumbers.Dispose();
       result.Dispose();
   }
}</code></pre>
</example>

<p>Implement your lambda function inside the <code>Job.WithCode(lambda)</code> function. The lambda function cannot
take any parameters. You can capture local variables.</p>
<ul>
<li><code>Schedule()</code> -- executes the lambda function as a single job.</li>
<li><code>Run()</code> -- executes immediately on the main thread. Immediately before it invokes <code>Run()</code> the system
 completes all jobs with a <a href="https://docs.unity3d.com/ScriptReference/Unity.Jobs.JobHandle.html">JobHandle</a> in the system <a class="xref" href="Unity.Entities.SystemBase.html#Unity_Entities_SystemBase_Dependency">Dependency</a> property as well as any
 jobs with a <a href="https://docs.unity3d.com/ScriptReference/Unity.Jobs.JobHandle.html">JobHandle</a> passed as a dependency to <code>Run()</code> as an (optional) parameter.</li>
</ul>
<p>When scheduling a job, you can pass a <a href="https://docs.unity3d.com/ScriptReference/Unity.Jobs.JobHandle.html">JobHandle</a> to set the job&apos;s dependencies explicitly and the
construction returns the updated <a href="https://docs.unity3d.com/ScriptReference/Unity.Jobs.JobHandle.html">JobHandle</a> combining the earlier dependencies with the new job. If you
do not provide a <a href="https://docs.unity3d.com/ScriptReference/Unity.Jobs.JobHandle.html">JobHandle</a>, the system uses <a class="xref" href="Unity.Entities.SystemBase.html#Unity_Entities_SystemBase_Dependency">Dependency</a> when scheduling the job, and updates
the property to include the new job automatically.</p>
<p>You can use the additional options listed for <a class="xref" href="Unity.Entities.SystemBase.html#Unity_Entities_SystemBase_Entities">Entities.ForEach</a> with a <code>Job.WithCode</code> construction.</p>
<h5 id="capturing-variables"><strong>Capturing variables</strong></h5>
<p>You can capture local variables in the lambda function. When you execute the function using a job (by
calling <code>Schedule()</code>, <code>ScheduleParallel()</code> or <code>ScheduleSingle()</code> instead of <code>Run()</code>) there are some
restrictions on the captured variables and how you use them:</p>
<ul>
<li>Only native containers and blittable types can be captured.</li>
<li>A job can only write to captured variables that are native containers.
(To “return” a single value, create a [native array] with one element.)</li>
</ul>
<p>You can use the following functions to apply modifiers and attributes to the captured [native container]
variables, including [native arrays]:</p>
<ul>
<li><p><strong><code>WithReadOnly(myvar)</code></strong> — restricts access to the variable as read-only.</p>
</li>
<li><p><strong><code>WithDeallocateOnJobCompletion(myvar)</code></strong> — deallocates the native container after the job is complete.
See <a href="https://docs.unity3d.com/ScriptReference/Unity.Collections.DeallocateOnJobCompletionAttribute.html">DeallocateOnJobCompletionAttribute</a>.</p>
</li>
<li><p><strong><code>WithNativeDisableParallelForRestriction(myvar)</code></strong> — permits multiple threads to access the same
writable native container. Parallel access is only safe when each thread only accesses its own, unique
range of elements in the container. If more than one thread accesses the same element a race condition is
created in which the timing of the access changes the result. See <a href="https://docs.unity3d.com/ScriptReference/Unity.Collections.NativeDisableParallelForRestrictionAttribute.html">NativeDisableParallelForRestriction</a>.</p>
</li>
<li><p><strong><code>WithNativeDisableContainerSafetyRestriction(myvar)</code></strong> — disables normal safety restrictions that
prevent dangerous access to the native container. Disabling safety restrictions unwisely can lead to race
conditions, subtle bugs, and crashes in your application. See <a href="https://docs.unity3d.com/ScriptReference/Unity.Collections.LowLevel.Unsafe.NativeDisableContainerSafetyRestrictionAttribute.html">NativeDisableContainerSafetyRestrictionAttribute</a>.</p>
</li>
<li><p><strong><code>WithNativeDisableUnsafePtrRestrictionAttribute(myvar)</code></strong> — Allows you to use unsafe pointers provided
by the native container. Incorrect pointer use can lead to subtle bugs, instability, and crashes in your
application. See <a href="https://docs.unity3d.com/ScriptReference/Unity.Collections.LowLevel.Unsafe.NativeDisableUnsafePtrRestrictionAttribute.html">NativeDisableUnsafePtrRestrictionAttribute</a>.</p>
</li>
</ul>
</div>
  <h3 id="methods">Methods
  </h3>
  <span class="small pull-right mobile-hide">
    <span class="divider">|</span>
    <a href="https://github.com/Unity-Technologies/dots/blob/docs-systembase-changes/Samples/Packages/com.unity.entities/Unity.Entities/SystemBase.cs">Improve this Doc</a>
  </span>
  
  <a id="Unity_Entities_SystemBase_CompleteDependency_" data-uid="Unity.Entities.SystemBase.CompleteDependency*"></a>
  <h4 id="Unity_Entities_SystemBase_CompleteDependency" data-uid="Unity.Entities.SystemBase.CompleteDependency">CompleteDependency()</h4>
  <div class="markdown level1 summary"></div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">protected void CompleteDependency()</code></pre>
  </div>
  <span class="small pull-right mobile-hide">
    <span class="divider">|</span>
    <a href="https://github.com/Unity-Technologies/dots/blob/docs-systembase-changes/Samples/Packages/com.unity.entities/Unity.Entities/SystemBase.cs">Improve this Doc</a>
  </span>
  
  <a id="Unity_Entities_SystemBase_GetComponent_" data-uid="Unity.Entities.SystemBase.GetComponent*"></a>
  <h4 id="Unity_Entities_SystemBase_GetComponent__1_Unity_Entities_Entity_" data-uid="Unity.Entities.SystemBase.GetComponent``1(Unity.Entities.Entity)">GetComponent&lt;T&gt;(Entity)</h4>
  <div class="markdown level1 summary"><p>Look up the value of a component for an entity.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">protected T GetComponent&lt;T&gt;(Entity entity)
    where T : struct, IComponentData</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Unity.Entities.Entity.html">Entity</a></td>
        <td><span class="parametername">entity</span></td>
        <td><p>The entity.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">T</span></td>
        <td><p>A struct of type T containing the component value.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="typeParameters">Type Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="parametername">T</span></td>
        <td><p>The type of component to retrieve.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 id="Unity_Entities_SystemBase_GetComponent__1_Unity_Entities_Entity__remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>Use this method to look up data in another entity using its <a class="xref" href="Unity.Entities.Entity.html">Entity</a> object. For example, if you
have a component that contains an Entity field, you can look up the component data for the referenced
entity using this method.</p>
<p>When iterating over a set of entities via <a class="xref" href="Unity.Entities.SystemBase.html#Unity_Entities_SystemBase_Entities">Entities.ForEach</a>, do not use this method to access data of the
current entity in the set. This function is much slower than accessing the data directly (by passing the
component containing the data to your lambda iteration function as a parameter).</p>
<p>When you call this method on the main thread, it invokes <a class="xref" href="Unity.Entities.EntityManager.html#Unity_Entities_EntityManager_GetComponentData__1_Unity_Entities_Entity_">GetComponentData&lt;T&gt;(Entity)</a>.
(An <a class="xref" href="Unity.Entities.SystemBase.html#Unity_Entities_SystemBase_Entities">Entities.ForEach</a> function invoked with <code>Run()</code> executes on the main thread.) When you call this method
inside a job scheduled using <a class="xref" href="Unity.Entities.SystemBase.html#Unity_Entities_SystemBase_Entities">Entities.ForEach</a>, this method gets replaced with component access methods
through <a class="xref" href="Unity.Entities.ComponentDataFromEntity-1.html">ComponentDataFromEntity&lt;T&gt;</a>.</p>
<p>In both cases, this lookup method results in a slower, indirect memory access. When possible, organize your
data to minimize the need for indirect lookups.</p>
</div>
  <h5 class="exceptions">Exceptions</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Condition</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.argumentexception">ArgumentException</a></td>
        <td><p>Thrown if the component type has no fields.</p>
</td>
      </tr>
    </tbody>
  </table>
  <span class="small pull-right mobile-hide">
    <span class="divider">|</span>
    <a href="https://github.com/Unity-Technologies/dots/blob/docs-systembase-changes/Samples/Packages/com.unity.entities/Unity.Entities/SystemBase.cs">Improve this Doc</a>
  </span>
  
  <a id="Unity_Entities_SystemBase_HasComponent_" data-uid="Unity.Entities.SystemBase.HasComponent*"></a>
  <h4 id="Unity_Entities_SystemBase_HasComponent__1_Unity_Entities_Entity_" data-uid="Unity.Entities.SystemBase.HasComponent``1(Unity.Entities.Entity)">HasComponent&lt;T&gt;(Entity)</h4>
  <div class="markdown level1 summary"><p>Checks whether an entity has a specific type of component.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">protected bool HasComponent&lt;T&gt;(Entity entity)
    where T : struct, IComponentData</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Unity.Entities.Entity.html">Entity</a></td>
        <td><span class="parametername">entity</span></td>
        <td><p>The Entity object.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.boolean">Boolean</a></td>
        <td><p>True, if the specified entity has the component.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="typeParameters">Type Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="parametername">T</span></td>
        <td><p>The data type of the component.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 id="Unity_Entities_SystemBase_HasComponent__1_Unity_Entities_Entity__remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>Always returns false for an entity that has been destroyed.</p>
<p>Use this method to check if another entity has a given type of component using its <a class="xref" href="Unity.Entities.Entity.html">Entity</a>
object. For example, if you have a component that contains an Entity field, you can check whether the
referenced entity has a specific type of component using this method. (Entities in the set always have
required components, so you don’t need to check for them.)</p>
<p>When iterating over a set of entities via <a class="xref" href="Unity.Entities.SystemBase.html#Unity_Entities_SystemBase_Entities">Entities.ForEach</a>, avoid using this method with the
current entity in the set. It is generally faster to change your entity query methods to avoid
optional components; this may require a different <a class="xref" href="Unity.Entities.SystemBase.html#Unity_Entities_SystemBase_Entities">Entities.ForEach</a> construction to handle
each combination of optional and non-optional components.</p>
<p>When you call this method on the main thread, it invokes <a class="xref" href="Unity.Entities.EntityManager.html#Unity_Entities_EntityManager_HasComponent__1_Unity_Entities_Entity_">HasComponent&lt;T&gt;(Entity)</a>.
(An <a class="xref" href="Unity.Entities.SystemBase.html#Unity_Entities_SystemBase_Entities">Entities.ForEach</a> function invoked with <code>Run()</code> executes on the main thread.) When you call this method
inside a job scheduled using <a class="xref" href="Unity.Entities.SystemBase.html#Unity_Entities_SystemBase_Entities">Entities.ForEach</a>, this method gets replaced with component access methods
through <a class="xref" href="Unity.Entities.ComponentDataFromEntity-1.html">ComponentDataFromEntity&lt;T&gt;</a>.</p>
<p>In both cases, this lookup method results in a slower, indirect memory access. When possible, organize your
data to minimize the need for indirect lookups.</p>
</div>
  <span class="small pull-right mobile-hide">
    <span class="divider">|</span>
    <a href="https://github.com/Unity-Technologies/dots/blob/docs-systembase-changes/Samples/Packages/com.unity.entities/Unity.Entities/SystemBase.cs">Improve this Doc</a>
  </span>
  
  <a id="Unity_Entities_SystemBase_OnUpdate_" data-uid="Unity.Entities.SystemBase.OnUpdate*"></a>
  <h4 id="Unity_Entities_SystemBase_OnUpdate" data-uid="Unity.Entities.SystemBase.OnUpdate">OnUpdate()</h4>
  <div class="markdown level1 summary"><p>Implement <code>OnUpdate()</code> to perform the major work of this system.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">protected abstract void OnUpdate()</code></pre>
  </div>
  <h5 id="Unity_Entities_SystemBase_OnUpdate_remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>The system invokes <code>OnUpdate()</code> once per frame on the main thread when any of this system&apos;s
<a class="xref" href="Unity.Entities.EntityQuery.html">EntityQueries</a> match existing entities, the system has the [AlwaysUpdateSystem] 
attribute, or the system has no queries at all. <code>OnUpdate()</code> is triggered by the system&apos;s
parent system group, which calls the <a class="xref" href="Unity.Entities.SystemBase.html#Unity_Entities_SystemBase_Update">Update()</a> method of all its child
systems in its own <code>OnUpdate()</code> function. The <code>Update()</code> function evaluates whether a system
should, in fact, update before calling <code>OnUpdate()</code>.</p>
<p>The <a class="xref" href="Unity.Entities.SystemBase.html#Unity_Entities_SystemBase_Entities">Entities.ForEach</a> and <a class="xref" href="Unity.Entities.SystemBase.html#Unity_Entities_SystemBase_Job">Job.WithCode</a> constructions provide convenient mechanisms for defining jobs.
You can also instantiate and schedule an <a class="xref" href="Unity.Entities.IJobChunk.html">IJobChunk</a> instance; you can use the
[C# JobSystem] or you can perform work on the main thread. If you call <a class="xref" href="Unity.Entities.EntityManager.html">EntityManager</a> methods that
perform structural changes on the main thread, be sure to arrange the system order to minimize the
performance impact of the resulting <a class="xref" href="../manual/sync_points.html">sync points</a>.</p>
</div>
  <span class="small pull-right mobile-hide">
    <span class="divider">|</span>
    <a href="https://github.com/Unity-Technologies/dots/blob/docs-systembase-changes/Samples/Packages/com.unity.entities/Unity.Entities/SystemBase.cs">Improve this Doc</a>
  </span>
  
  <a id="Unity_Entities_SystemBase_SetComponent_" data-uid="Unity.Entities.SystemBase.SetComponent*"></a>
  <h4 id="Unity_Entities_SystemBase_SetComponent__1_Unity_Entities_Entity___0_" data-uid="Unity.Entities.SystemBase.SetComponent``1(Unity.Entities.Entity,``0)">SetComponent&lt;T&gt;(Entity, T)</h4>
  <div class="markdown level1 summary"><p>Sets the value of a component of an entity.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">protected void SetComponent&lt;T&gt;(Entity entity, T component)
    where T : struct, IComponentData</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Unity.Entities.Entity.html">Entity</a></td>
        <td><span class="parametername">entity</span></td>
        <td><p>The entity.</p>
</td>
      </tr>
      <tr>
        <td><span class="xref">T</span></td>
        <td><span class="parametername">component</span></td>
        <td><p>The data to set.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="typeParameters">Type Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="parametername">T</span></td>
        <td><p>The component type.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 id="Unity_Entities_SystemBase_SetComponent__1_Unity_Entities_Entity___0__remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>Use this method to look up and set data in another entity using its <a class="xref" href="Unity.Entities.Entity.html">Entity</a> object. For example, if you
have a component that contains an Entity field, you can update the component data for the referenced
entity using this method.</p>
<p>When iterating over a set of entities via <a class="xref" href="Unity.Entities.SystemBase.html#Unity_Entities_SystemBase_Entities">Entities.ForEach</a>, do not use this method to update data of the
current entity in the set. This function is much slower than accessing the data directly (by passing the
component containing the data to your lambda iteration function as a parameter).</p>
<p>When you call this method on the main thread, it invokes <a class="xref" href="Unity.Entities.EntityManager.html#Unity_Entities_EntityManager_SetComponentData__1_Unity_Entities_Entity___0_">SetComponentData&lt;T&gt;(Entity, T)</a>.
(An <a class="xref" href="Unity.Entities.SystemBase.html#Unity_Entities_SystemBase_Entities">Entities.ForEach</a> function invoked with <code>Run()</code> executes on the main thread.) When you call this method
inside a job scheduled using <a class="xref" href="Unity.Entities.SystemBase.html#Unity_Entities_SystemBase_Entities">Entities.ForEach</a>, this method gets replaced with component access methods
through <a class="xref" href="Unity.Entities.ComponentDataFromEntity-1.html">ComponentDataFromEntity&lt;T&gt;</a>.</p>
<p>In both cases, this lookup method results in a slower, indirect memory access. When possible, organize your
data to minimize the need for indirect lookups.</p>
</div>
  <h5 class="exceptions">Exceptions</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Condition</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="https://docs.microsoft.com/dotnet/api/system.argumentexception">ArgumentException</a></td>
        <td><p>Thrown if the component type has no fields.</p>
</td>
      </tr>
    </tbody>
  </table>
  <span class="small pull-right mobile-hide">
    <span class="divider">|</span>
    <a href="https://github.com/Unity-Technologies/dots/blob/docs-systembase-changes/Samples/Packages/com.unity.entities/Unity.Entities/SystemBase.cs">Improve this Doc</a>
  </span>
  
  <a id="Unity_Entities_SystemBase_Update_" data-uid="Unity.Entities.SystemBase.Update*"></a>
  <h4 id="Unity_Entities_SystemBase_Update" data-uid="Unity.Entities.SystemBase.Update">Update()</h4>
  <div class="markdown level1 summary"><p>Update the system manually.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public override sealed void Update()</code></pre>
  </div>
  <h5 class="overrides">Overrides</h5>
  <div><a class="xref" href="Unity.Entities.ComponentSystemBase.html#Unity_Entities_ComponentSystemBase_Update">ComponentSystemBase.Update()</a></div>
  <h5 id="Unity_Entities_SystemBase_Update_remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>Most programs should not update systems manually. SystemBase implementations
cannot override <code>Update()</code>. Instead, implement system behavior in <a class="xref" href="Unity.Entities.SystemBase.html#Unity_Entities_SystemBase_OnUpdate">OnUpdate()</a>.</p>
</div>
  <h3 id="extensionmethods">Extension Methods</h3>
  <div>
      <a class="xref" href="Unity.Entities.ComponentSystemBaseManagedComponentExtensions.html#Unity_Entities_ComponentSystemBaseManagedComponentExtensions_HasSingleton__1_Unity_Entities_ComponentSystemBase_">ComponentSystemBaseManagedComponentExtensions.HasSingleton&lt;T&gt;(ComponentSystemBase)</a>
  </div>
  <div>
      <a class="xref" href="Unity.Entities.ComponentSystemBaseManagedComponentExtensions.html#Unity_Entities_ComponentSystemBaseManagedComponentExtensions_GetSingleton__1_Unity_Entities_ComponentSystemBase_">ComponentSystemBaseManagedComponentExtensions.GetSingleton&lt;T&gt;(ComponentSystemBase)</a>
  </div>
  <div>
      <a class="xref" href="Unity.Entities.ComponentSystemBaseManagedComponentExtensions.html#Unity_Entities_ComponentSystemBaseManagedComponentExtensions_SetSingleton__1_Unity_Entities_ComponentSystemBase___0_">ComponentSystemBaseManagedComponentExtensions.SetSingleton&lt;T&gt;(ComponentSystemBase, T)</a>
  </div>
  <div>
      <a class="xref" href="Unity.Entities.JobForEachExtensions.html#Unity_Entities_JobForEachExtensions_GetEntityQueryForIJobForEach_Unity_Entities_ComponentSystemBase_System_Type_">JobForEachExtensions.GetEntityQueryForIJobForEach(ComponentSystemBase, Type)</a>
  </div>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/Unity-Technologies/dots/blob/docs-systembase-changes/Samples/Packages/com.unity.entities/Unity.Entities/SystemBase.cs" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Copyright © 2020 Unity Technologies<br>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
    <script type="text/javascript" src="../styles/metadata-collector.js"></script>
    <script type="text/javascript" src="../styles/version-switcher.js"></script>
  </body>
</html>
