<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],   j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-5V25JL6');</script>
    <script type="text/javascript">thisPackageMetaData = { version: "0.7.0-preview.13", displayTitle:"Unity Entities Documentation 0.7.0-preview.13" };</script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
  
    <title>General purpose components | Unity Entities Documentation | 0.7.0-preview.13 </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="General purpose components | Unity Entities Documentation | 0.7.0-preview.13 ">
    <meta name="generator" content="docfx 2.40.12.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <link rel="stylesheet" href="../styles/version-switcher.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    <meta property="unity:packageTitle" content="Unity Entities Documentation | 0.7.0-preview.13">
    <meta property="docfx:rel" content="../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" class="manual">
	<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5V25JL6" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
        
        		<div class="back-to-unity-group">
        			<a class="back-to-unity" href="http://docs.unity3d.com/">docs.unity3d.com</a>
        		</div>
        
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items"></div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10" id="main_content">
          <div id="breadcrumb_placeholder"></div>
            <article class="content wrap" id="_content" data-uid="ecs-component-data">
<h1 id="general-purpose-components">General purpose components</h1>

<p><code>ComponentData</code> in Unity (also known as a component in standard ECS terms) is a struct that contains only the instance data for an <a href="entities.md">entity</a>. <code>ComponentData</code> should not contain methods beyond utility functions to access the data in the struct. You should implement all of your game logic and behavior in systems. To put this in terms of the object-oriented Unity system, this is somewhat similar to a Component class, but one that <strong>only contains variables</strong>.</p>
<p>The Unity ECS API provides an interface called <a class="xref" href="../api/Unity.Entities.IComponentData.html">IComponentData</a> that you can implement in your code to declare a general-purpose component type.</p>
<h2 id="icomponentdata">IComponentData</h2>
<p>Traditional Unity components (including <code>MonoBehaviour</code>) are <a href="https://en.wikipedia.org/wiki/Object-oriented_programming">object-oriented</a> classes that contain data and methods for behavior. <code>IComponentData</code> is a pure ECS-style component, which means that it defines no behavior, only data. You should implement <code>IComponentData</code> as struct rather than a class, which means that it is copied <a href="https://stackoverflow.com/questions/373419/whats-the-difference-between-passing-by-reference-vs-passing-by-value?answertab=votes#tab-top">by value instead of by reference</a> by default. You usually need to use the following pattern to modify data:</p>
<pre><code class="lang-c#">var transform = group.transform[index]; // Read

transform.heading = playerInput.move; // Modify
transform.position += deltaTime * playerInput.move * settings.playerMoveSpeed;

group.transform[index] = transform; // Write
</code></pre><p><code>IComponentData</code> structs must not contain references to managed objects. This is because <code>ComponentData</code> lives in simple non-garbage-collected tracked <a href="chunk_iteration.html">Chunk memory</a>, which has many performance advantages.</p>
<h3 id="managed-icomponentdata">Managed IComponentData</h3>
<p>It is helpful to use a managed <code>IComponentData</code> (that is, <code>IComponentData</code> declared using a <code>class</code> rather than <code>struct</code>) to help port existing code over to ECS in a piecemeal fashion, interoperate with managed data not suitable in <code>ISharedComponentData</code>, or to prototype a data layout. </p>
<p>These components are used the same way as value type <code>IComponentData</code>. However, ECS handles them internally in a much different (and slower) way. If you don&#39;t need managed component support, define <code>UNITY_DISABLE_MANAGED_COMPONENTS</code> in your application&#39;s <strong>Player Settings</strong> (menu: <strong>Edit &gt; Project Settings &gt; Player &gt; Scripting Define Symbols</strong>) to prevent accidental usage.</p>
<p>Because managed <code>IComponentData</code> is a managed type, it has the following performance drawbacks compared to valuetype <code>IComponentData</code>:</p>
<ul>
<li>It cannot be used with the Burst Compiler</li>
<li>It cannot be used in job structs </li>
<li>It cannot use <a href="chunk_iteration.html">Chunk memory</a> </li>
<li>It requires garbage collection</li>
</ul>
<p>You should try to limit the number of managed components, and use blittable types as much as possible. </p>
<p>Managed <code>IComponentData</code> must implement the <code>IEquatable&lt;T&gt;</code> interface and override for <code>Object.GetHashCode()</code>. Additionally, for serialization purposes, managed components must be default constructible.</p>
<p>You must set the value of the component on the main thread. To do this, use either the  <code>EntityManager</code> or <code>EntityCommandBuffer</code>. Because a component is a reference type, you can change the value of the component without moving entities across Chunks, unlike <a class="xref" href="../api/Unity.Entities.ISharedComponentData.html">ISharedComponentData</a>. This does not create a sync-point. </p>
<p>However, while managed components are logically stored separate from value-type components, they still contribute to an entity&#39;s <code>EntityArchetype</code> definition. As such, adding a new managed component to an entity  still causes ECS to create a new archetype (if a matching archetype doesn&#39;t exist already) and it moves the entity to a new Chunk.</p>
<p>For an example, see the file: <code>/Packages/com.unity.entities/Unity.Entities/IComponentData.cs</code>.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/Unity-Technologies/dots/blob/docs-systembase-changes/Samples/Packages/com.unity.entities/Documentation~/component_data.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Copyright © 2020 Unity Technologies<br>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
    <script type="text/javascript" src="../styles/metadata-collector.js"></script>
    <script type="text/javascript" src="../styles/version-switcher.js"></script>
  </body>
</html>
