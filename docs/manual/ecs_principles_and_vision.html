<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Unity Data Oriented Tech Stack principles and vision </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Unity Data Oriented Tech Stack principles and vision ">
    <meta name="generator" content="docfx 2.40.7.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc">
    <meta property="docfx:tocrel" content="toc">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../images/logo.png" alt="">
              </a>

            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
                
                <ul class="nav level1 navbar-nav">
                      <li>
                          <a href="../manual/ecs_principles_and_vision.html" title="Manual">Manual</a>
                      </li>
                      <li>
                          <a href="../api/Unity.Collections.html" title="Script Reference">Script Reference</a>
                      </li>
                </ul>    </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div>
              <div class="sidefilter">
                <form class="toc-filter">
                  <span class="glyphicon glyphicon-filter filter-icon"></span>
                  <input type="text" id="toc_filter_input" placeholder="Enter here to filter..." onkeypress="if(event.keyCode==13) {return false;}">
                </form>
              </div>
              <div class="sidetoc">
                <div class="toc" id="toc">
                  
                  <ul class="nav level1">
                    <li class="active">
                      <a href="ecs_principles_and_vision.html" title="The Unity Data-Oriented Tech Stack project" class="active">The Unity Data-Oriented Tech Stack project</a>
                    </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a href="getting_started/getting_started.html" title="Getting started" class="">Getting started</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="getting_started/ecs_introduction.html" title="Entity Component Systems" class="">Entity Component Systems</a>
                          </li>
                          <li class="">
                            <a href="getting_started/hello_ecs.html" title="Hello (ECS) World" class="">Hello (ECS) World</a>
                          </li>
                          <li class="">
                            <a href="getting_started/samples_overview.html" title="Samples" class="">Samples</a>
                          </li>
                        </ul>  </li>
                    <li class="">
                      <span class="expand-stub"></span>
                      <a href="com.unity.entities/index.html" title="Unity Entity Component System" class="">Unity Entity Component System</a>
                        
                        <ul class="nav level2">
                          <li class="">
                            <a href="com.unity.entities/index.html" title="Overview" class="">Overview</a>
                          </li>
                          <li class="">
                            <span class="expand-stub"></span>
                            <a href="com.unity.entities/index.html" title="Core ECS" class="">Core ECS</a>
                              
                              <ul class="nav level3">
                                <li class="">
                                  <span class="expand-stub"></span>
                                  <a href="com.unity.entities/ecs_entities.html" title="Entities" class="">Entities</a>
                                    
                                    <ul class="nav level4">
                                      <li class="">
                                        <a href="com.unity.entities/world.html" title="Worlds" class="">Worlds</a>
                                      </li>
                                    </ul>  </li>
                                <li class="">
                                  <span class="expand-stub"></span>
                                  <a href="com.unity.entities/ecs_components.html" title="Components" class="">Components</a>
                                    
                                    <ul class="nav level4">
                                      <li class="">
                                        <a href="com.unity.entities/component_data.html" title="General Purpose Components" class="">General Purpose Components</a>
                                      </li>
                                      <li class="">
                                        <a href="com.unity.entities/shared_component_data.html" title="Shared Components" class="">Shared Components</a>
                                      </li>
                                      <li class="">
                                        <a href="com.unity.entities/system_state_components.html" title="System State Components" class="">System State Components</a>
                                      </li>
                                      <li class="">
                                        <a href="com.unity.entities/dynamic_buffers.html" title="Dynamic Buffer Components" class="">Dynamic Buffer Components</a>
                                      </li>
                                    </ul>  </li>
                                <li class="">
                                  <span class="expand-stub"></span>
                                  <a href="com.unity.entities/ecs_systems.html" title="System" class="">System</a>
                                    
                                    <ul class="nav level4">
                                      <li class="">
                                        <a href="com.unity.entities/component_system.html" title="Component Systems" class="">Component Systems</a>
                                      </li>
                                      <li class="">
                                        <a href="com.unity.entities/job_component_system.html" title="Job Component Systems" class="">Job Component Systems</a>
                                      </li>
                                      <li class="">
                                        <a href="com.unity.entities/entity_command_buffer.html" title="Entity Command Buffers" class="">Entity Command Buffers</a>
                                      </li>
                                      <li class="">
                                        <a href="com.unity.entities/system_update_order.html" title="System Update Order" class="">System Update Order</a>
                                      </li>
                                    </ul>  </li>
                                <li class="">
                                  <span class="expand-stub"></span>
                                  <a href="com.unity.entities/chunk_iteration.html" title="Accessing Entity Data" class="">Accessing Entity Data</a>
                                    
                                    <ul class="nav level4">
                                      <li class="">
                                        <a href="com.unity.entities/entity_iteration_job.html" title="Using IJobProcessComponentData" class="">Using IJobProcessComponentData</a>
                                      </li>
                                      <li class="">
                                        <a href="com.unity.entities/chunk_iteration_job.html" title="Using IJobChunk" class="">Using IJobChunk</a>
                                      </li>
                                      <li class="">
                                        <a href="com.unity.entities/entity_iteration_foreach.html" title="Using ComponentSystem and ForEach" class="">Using ComponentSystem and ForEach</a>
                                      </li>
                                      <li class="">
                                        <a href="com.unity.entities/manual_iteration.html" title="Manual iteration" class="">Manual iteration</a>
                                      </li>
                                      <li class="">
                                        <a href="com.unity.entities/component_group.html" title="Component Groups" class="">Component Groups</a>
                                      </li>
                                    </ul>  </li>
                                <li class="">
                                  <a href="com.unity.entities/version_numbers.html" title="Versions and Generations" class="">Versions and Generations</a>
                                </li>
                                <li class="">
                                  <a href="com.unity.entities/ecs_burst.html" title="Using Burst" class="">Using Burst</a>
                                </li>
                                <li class="">
                                  <a href="com.unity.entities/ecs_data_structures.html" title="Data Structures" class="">Data Structures</a>
                                </li>
                                <li class="">
                                  <span class="expand-stub"></span>
                                  <a href="com.unity.entities/ecs_job_overview.html" title="Jobs in ECS" class="">Jobs in ECS</a>
                                    
                                    <ul class="nav level4">
                                      <li class="">
                                        <a href="com.unity.entities/ecs_job_extensions.html" title="ECS Job System extensions" class="">ECS Job System extensions</a>
                                      </li>
                                    </ul>  </li>
                              </ul>  </li>
                          <li class="">
                            <span class="expand-stub"></span>
                            <a href="com.unity.entities/index.html" title="Creating Gameplay" class="">Creating Gameplay</a>
                              
                              <ul class="nav level3">
                                <li class="">
                                  <a href="com.unity.entities/transform_system.html" title="Transforms" class="">Transforms</a>
                                </li>
                                <li class="">
                                  <a href="com.unity.entities/gp_rendering.html" title="Rendering" class="">Rendering</a>
                                </li>
                              </ul>  </li>
                        </ul>  </li>
                    <li class="">
                      <a href="cheatsheet.html" title="Quick Reference" class="">Quick Reference</a>
                    </li>
                    <li class="">
                      <a href="glossary.html" title="Glossary" class="">Glossary</a>
                    </li>
                    <li class="">
                      <a href="resources.html" title="Learning Resources" class="">Learning Resources</a>
                    </li>
                  </ul>        </div>
              </div>
            </div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="unity-data-oriented-tech-stack-principles-and-vision">Unity Data Oriented Tech Stack principles and vision</h1>

<p>The Unity Data Oriented Tech Stack is built on a set of principles. These principles provide a good context for what we are trying to achieve. Some of the principles are clearly reflected in the code. Others are simply goals that we set for ourselves.</p>
<h2 id="performance-by-default">Performance by default</h2>
<p>We want to make it simple to create efficient machine code for all platforms.</p>
<p>We measure ourselves against the performance that can be achieved in C++ with handwritten highly optimized <a href="https://en.wikipedia.org/wiki/SIMD">simd</a> intrinsics.</p>
<p>We are using a combination of compiler technology (Burst), containers (Unity.Collections), data layout of components (ECS) to make it easy to write efficient code by default.</p>
<ul>
<li>Data layout &amp; iteration - The Entity Component System guarantees linear data layout when iterating entities in chunks by default. This is a critical part of the performance gains provided by the Data Oriented Tech Stack.</li>
<li>The C# job system lets you write multithreaded code in a simple way. It is also safe. The C# Job Debugger detects any race conditions.</li>
<li>Burst is our compiler specifically for C# jobs. C# job code follows certain patterns that we can use to produce more efficient machine code. Code is compiled &amp; optimized for each target platforms taking advantage of SIMD instructions.</li>
</ul>
<p>An example of this is the performance of Instantiation. Comparing to the theoretical limit, of instantiating 100,000 entities with 320 bytes of a memcpy takes 9ms. Instantiating those entities via the Entity Component System takes 10ms. So we are very close to the theoretical limit.</p>
<p>At Unite Austin, we showcased a demo with 100,000 individual units in a massive battle simulation running at 60 FPS. All game code was running multicore.
<a href="https://www.youtube.com/watch?v=0969LalB7vw">See ECS performance demo [Video]</a></p>
<h2 id="simple">Simple</h2>
<p>Writing <a href="https://en.wiktionary.org/wiki/performant">performant</a> code must be simple. We believe that we can make writing fast code as simple as <strong>MonoBehaviour.Update</strong>. </p>
<blockquote><p>Note: To set expectations right, we think we still have some ways to go to achieve this goal.</p>
</blockquote>
<h2 id="one-way-of-writing-code">One way of writing code</h2>
<p>We want to define a single way of writing game code, editor code, asset pipeline code, engine code. We believe this creates a simpler tool for our users, and more ability to change things around.</p>
<p>Physics is a great example. Currently Physics is a black box solution. In practice many developers want to tweak the simulation code to fit it to their games needs. If physics engine code was written the same way as game code using ECS, it would make it easy to plug your own simulation code between existing physics simulation stages or take full control.</p>
<p>Another example, lets imagine you want to make a heavily moddable game.</p>
<p>If our import pipeline is implemented as a set of <strong>ComponentSystems</strong>. And we have some FBX import pipeline code that is by default used in the asset pipeline to import and postprocess an FBX file. (Mesh is baked out and FBX import code used in the editor.)</p>
<p>Then it would be easy to configure the Package Manager that the same FBX import and postprocessing code could be used in a deployed game for the purposes of modding.</p>
<p>We believe this will, at the foundation level, make Unity significantly more flexible than it is today.</p>
<h2 id="networking">Networking</h2>
<p>We want to define one simple way of writing all game code. When following this approach, your game can use one of three network architectures depending on what type of game you create.</p>
<p>We are focused on providing best of class network engine support for hosted games. Using the recently acquired <a href="http://Multiplay.com">Multiplay.com</a> service we offer a simple pipeline to host said games.</p>
<ul>
<li>FPS - Simulation on the server</li>
<li>RTS - Deterministic lock step simulation</li>
<li>Arcade games - GGPO</li>
</ul>
<blockquote><p>Note: To set expectations right, we are not yet shipping any networking code on top of Entity Component System. It is work in progress.</p>
</blockquote>
<h2 id="determinism">Determinism</h2>
<p>Our build pipeline must be <a href="https://en.wikipedia.org/wiki/Deterministic_algorithm">deterministic</a>. Users can choose if all simulation code should run deterministically.</p>
<p>You should always get the same results with the same inputs, no matter what device is being used. This is important for networking, replay features and even advanced debugging tools.</p>
<p>To do this, we will leverage our Burst compiler to produce exact floating point math between different platforms. Imagine a linux server &amp; iOS device running the same floating point math code. This is useful for many scenarios particularly for connected games, but also debugging, replay etc. </p>
<blockquote><p>Note: Floating point math discrepancies is a problem that Unity decided to tackle head on. This issue has been known about for some time, but so far there has not been a need great enough to encourage people to solve it. For some insight into this problem, including some of the workarounds needed to avoid solving it, consider reading <a href="https://randomascii.wordpress.com/2013/07/16/floating-point-determinism/">Floating-Point Determinism by Bruce Dawson</a>.</p>
</blockquote>
<h2 id="sandbox">Sandbox</h2>
<p>Unity is a sandbox, safe and simple.</p>
<p>We provide great error messages when API&#39;s are used incorrectly, we never put ourselves in a position where incorrect usage results in a crash and that is by design (as opposed to a bug we can quickly fix).</p>
<p>A good example of sandbox behaviour is that our C# job system guarantees that none of your C# job code has race conditions. We deterministically check all possible race conditions through a combination of static code analysis &amp; runtime checks. We give you well written error messages about any race conditions right away. So you can trust that your code works and feel safe that even developers who write multithreaded game code for the first time will do it right.</p>
<h2 id="tiny">Tiny</h2>
<p>We want Unity to be usable for all content from &lt; 50kb executables + content, to gigabyte sized games. We want Unity to load in less than 1 second for small content.</p>
<h2 id="iteration-time">Iteration time</h2>
<p>We aim to keep iteration time for any common operations in a large project folder below 500ms.</p>
<p>As an example we are working on rewriting the C# compiler to be fully incremental with the goal of:</p>
<blockquote><p>When changing a single .cs file in a large project. The combined compile and hot reload time should be less than 500ms.</p>
</blockquote>
<h2 id="our-code-comes-with-full-unit-test-coverage">Our code comes with full unit test coverage</h2>
<p>We believe in shipping robust code from the start. We use unit tests to prove that our code works correctly when it is written and committed by the developer. Tests are shipped as part of the packages.</p>
<h2 id="evolution">Evolution</h2>
<p>We are aware that we are proposing a rather large change in how to write code. From MonoBehaviour.Update to ComponentSystem &amp; using jobs.</p>
<p>We believe that ultimately the only thing that convinces a game developer is trying it and seeing the result with your own eyes, on your own game. </p>
<p>Thus it is important that applying the ECS approach on an existing project should be easy and quick to do. Our goal is that within 30 minutes a user can, in a large project, change some code from MonoBehaviour.Update to ComponentSystem and have a successful experience optimizing their game code.</p>
<h2 id="packages">Packages</h2>
<p>We want the majority of our engine code to be written in C# and deployed in a Package. All source code is available to all Unity Pro customers.</p>
<p>We want a rapid feedback loop with customers, given that we can push code and get feedback on something quickly in a package without destabilizing other parts.</p>
<p>Previously most of our engine code was written in C++, which creates a disconnect with how our customers write code and how programmers at Unity write code. Due to the Burst compiler tech &amp; ECS, we can achieve better than C++ with C# code and as a result we can all write code exactly the same way.</p>
<h2 id="collaboration">Collaboration</h2>
<p>We believe Unity users and Unity developers are all on the same team. Our purpose is to help all Unity users create the best game experiences faster, in higher quality, and with great performance. </p>
<p>We believe every feature we develop must be developed with real scenarios and real production feedback early on. The Package Manager facilitates that.</p>
<p>For those in the community that want to contribute engine code, we aim to make that easy by working directly on the same code repositories that contributors can commit to as well. Through well defined principles and full test coverage of all features, we hope to keep the quality of contributions high as well. </p>
<p>The source code repositories will be available for all Unity Pro Customers.</p>
<h2 id="transparency">Transparency</h2>
<p>We believe in transparency. We develop our features in the open, we actively communicate on both forum and blogs. We reserve time so each developer can spend time with customers and understand our users pain points.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/Unity-Technologies/dots/blob/organize-docs/doc-src/manual/ecs_principles_and_vision.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            &nbsp;
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
