<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],   j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-MC35ML');</script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
  
    <title>Importing humanoid animations | Unity Technologies Developer Guide </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Importing humanoid animations | Unity Technologies Developer Guide ">
    <meta name="generator" content="docfx 2.40.7.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" class="manual">
	<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MC35ML" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
        
        		<div class="back-to-unity-group">
        			<a class="back-to-unity" href="http://docs.unity3d.com/">docs.unity3d.com</a>
        		</div>
        
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items"></div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="importing-humanoid-animations">Importing humanoid animations</h1>

<p>When Unity imports Model files that contain <strong>Humanoid</strong> Rigs and Animation, it needs to reconcile the bone structure of the Model to its Animation. It does this by mapping each bone in the file to a Humanoid Avatar so that it can play the Animation properly. For this reason, it is important to carefully prepare your Model file before importing into Unity.</p>
<ol>
<li><a href="#AvatarSetup">Define the Rig type and create the Avatar</a>.</li>
<li><a href="#AvatarConfig">Correct or verify the Avatar&#39;s mapping</a>.</li>
<li>Once you are finished with the bone mapping, you can optionally click the <strong>Muscles &amp; Settings</strong> tab to <a href="MuscleDefinitions.html">tweak the Avatar&#39;s muscle configuration</a>.</li>
<li>You can optionally <a href="class-Avatar#HumanTemplate">save the mapping of your skeleton&#39;s bones to the Avatar</a> as a Human Template (.ht) file.</li>
<li>You can optionally limit the animation that gets imported on certain bones by <a href="#AvatarMask">defining an Avatar Mask</a>.</li>
<li>From the <strong>Animation</strong> tab, enable the <strong>Import Animation</strong> option and then set the other Asset-specific properties, .</li>
<li>If the file consists of multiple animations or actions, you can <a href="Splittinganimations.html">define specific action ranges as Animation Clips</a>. </li>
<li>For each Animation Clip defined in the file, you can:<ul>
<li><a href="class-AnimationClip#ClipProperties">Change the pose and root transform</a></li>
<li><a href="LoopingAnimationClips.html">Optimize looping</a></li>
<li><strong>Mirror</strong> the animation on both sides of the Humanoid skeleton.</li>
<li><a href="AnimationCurvesOnImportedClips.html">Add curves to the clip</a> in order to animate the timings of other items</li>
<li><a href="AnimationEventsOnImportedClips.html">Add events to the clip</a> in order to trigger certain actions in time with the animation</li>
<li><a href="AnimationMaskOnImportedClips.html">Discard part of the animation</a> similar to using a runtime <a href="class-AvatarMask.html">Avatar Mask</a> but applied at import time</li>
<li><a href="AnimationRootMotionNodeOnImportedClips.html">Select a different Root Motion Node</a> to drive the action from</li>
<li><a href="class-AnimationClip#ImportMessages">Read any messages from Unity about importing the clip</a></li>
<li><a href="class-AnimationClip#AnimationPreview">Watch a preview of the animation clip</a></li>
</ul>
</li>
<li>To save your changes, click the <strong>Apply</strong> button at the bottom of the <strong>Import Settings</strong> window or <strong>Revert</strong> to discard your changes.</li>
</ol>
<p><a name="AvatarSetup"></a></p>
<h2 id="set-up-the-avatar">Set up the Avatar</h2>
<p>From the <a href="FBXImporter-Rig.html">Rig tab of the Inspector window</a>, set the <strong>Animation Type</strong> to <strong>Humanoid</strong>. By default, the <strong>Avatar Definition</strong> property is set to <strong>Create From This Model</strong>. If you keep this option, Unity attempts to map the set of bones defined in the file to a Humanoid Avatar. </p>
<p><img src="../uploads/Main/MecanimImporterRigTab.png" alt="Humanoid Rig"></p>
<p><strong>Note:</strong> In some cases, you can change this option to <strong>Copy From Other Avatar</strong> to use an Avatar you already defined for another Model file. For example, if you create a Mesh (skin) in your 3D modeling application with several distinct animations, you can export the Mesh to one FBX file, and each animation to its own FBX file. When you import these files into Unity, you only need to create a single Avatar for the first file you import (usually the Mesh). As long as all the files use the same bone structure, you can re-use that Avatar for the rest of the files (for example, all the animations).</p>
<p>If you enable this option, you must specify which Avatar you want to use by setting the <strong>Source</strong> property.</p>
<p>Click the <strong>Apply</strong> button. Unity tries to match up the existing bone structure to the Avatar bone structure. In many cases, it can do this automatically by analyzing the connections between bones in the rig.</p>
<p>If the match succeeds, a check mark appears next to the <strong>Configure</strong> menu. Unity also adds an Avatar sub-asset to the Model Asset, which you can find in the Project view. </p>
<p><img src="../uploads/Main/MecanimFBXNoAvatar.png" alt="Avatar appears as a sub-asset of the imported Model"> </p>
<p>A successful match simply means that Unity was able to match all of the required bones. However, for better results, you also need to match the optional bones and set the model in a proper <strong>T-pose</strong>. </p>
<p>If Unity can&#39;t create the Avatar, a cross appears next to the <strong>Configure</strong> button, and no Avatar sub-asset appears in the Project view. </p>
<p><img src="../uploads/Main/MecanimAvatarInvalid.png" alt="Unity failed to create a valid Avatar"> </p>
<p>Since the Avatar is such an important aspect of the animation system, it is important to configure it properly for your <strong>Model</strong>. </p>
<p>For this reason, whether or not the automatic Avatar creation succeeds, you should always <a href="#AvatarConfig">check that your Avatar</a> is valid and properly set up. </p>
<p><a name="AvatarConfig"></a></p>
<h2 id="configure-the-avatar">Configure the Avatar</h2>
<p>If Unity failed to create the Avatar for your model, you must click the <strong>Configure ...</strong> button on the <strong>Rig</strong> tab to open the <a href="class-Avatar.html">Avatar window</a> and fix your Avatar.</p>
<p>If the match was successful, you can either click the <strong>Configure ...</strong> button on the <strong>Rig</strong> tab or open the window from the Project view:</p>
<ol>
<li>Click the Avatar sub-Asset in the <strong>Project</strong> view. The <strong>Inspector</strong> displays the name of the Avatar and a <strong>Configure Avatar</strong> button.</li>
<li>Click the <strong>Configure Avatar</strong> button.</li>
</ol>
<p><img src="../uploads/Main/MecanimAvatarCreated.png" alt="The Inspector for an Avatar sub-asset"> </p>
<p>If you haven&#39;t already saved the Avatar, a message appears asking you to save your scene:</p>
<p><img src="../uploads/Main/MecanimConfigureAvatarSaveDialog.png" alt=""> </p>
<p>The reason for this is that in <strong>Configure</strong> mode, the Scene view is used to display bone, muscle and animation information for the selected model alone, without displaying the rest of the scene.</p>
<p>Once you have saved the scene, the <strong>Avatar</strong> window appears in the <strong>Inspector</strong> displaying any bone mapping.</p>
<p>Make sure the bone mapping is correct and that you map any optional bones that Unity did not assign.</p>
<p>Your skeleton needs to have at least the required bones in place for Unity to produce a valid match. In order to improve your chances for finding a match to the Avatar, name your bones in a way that reflects the body parts they represent. For example, &quot;LeftArm&quot; and &quot;RightForearm&quot; make it clear what these bones control. </p>
<h3 id="mapping-strategies">Mapping strategies</h3>
<p>If the model does <em>not</em> yield a valid match, you can use a similar process to the one that Unity uses internally: </p>
<ol>
<li>Choose <strong>Clear</strong> from the <strong>Mapping</strong> menu at the bottom of the <strong>Avatar</strong> window to reset any mapping that Unity attempted.<br><img src="../uploads/Main/MecanimMappingMenus.png" alt="The __Mapping__ drop-down menu at the bottom of the __Avatar__ window"></li>
<li>Choose <strong>Sample Bind-pose__from the __Pose</strong> menu at the bottom of the <strong>Avatar</strong> window to approximate the Model&#39;s initial modeling pose.<br><img src="../uploads/Main/MecanimPoseMenus.png" alt="The __Pose__ drop-down menu at the bottom of the __Avatar__ window"></li>
<li>Choose <strong>Mapping</strong> &gt; <strong>Automap</strong> to create a bone-mapping from an initial pose.</li>
<li>Choose <strong>Pose</strong> &gt; <strong>Enforce T-Pose</strong> to set the Model back to to required T-pose.</li>
</ol>
<p>If automapping fails completely or partially, you can manually assign bones by either dragging them from the <strong>Scene</strong> view or from the <strong>Hierarchy</strong> view. If Unity thinks a bone fits, it appears in green in the <strong>Avatar Mapping</strong> tab; otherwise it appears in red. </p>
<h3 id="resetting-the-pose">Resetting the pose</h3>
<p>The <strong>T-pose</strong> is the default pose required by Unity animation and is the recommended pose to model in your 3D modeling application. However, if you did not use the T-pose to model your character and the animation does not work as expected, you can choose the :</p>
<p><img src="../uploads/Main/MecanimPoseMenus.png" alt="The __Pose__ drop-down menu at the bottom of the __Avatar__ window"> </p>
<p>If the bone assignment is correct, but the character is not in the correct <em>pose</em>, you will see the message &quot;Character not in T-Pose&quot;. You can try to fix that by choosing <strong>Enforce T-Pose</strong> from the <strong>Pose</strong> menu. If the pose is still not correct, you can manually rotate the remaining bones into a T-pose.</p>
<p><a name="AvatarMask"></a></p>
<h2 id="creating-an-avatar-mask">Creating an Avatar Mask</h2>
<p>Masking allows you to discard some of the animation data within a clip, allowing the clip to animate only parts of the object or character rather than the entire thing.  For example, you may have a standard walking animation that includes both arm and leg motion, but if a character is carrying a large object with both hands then you wouldn&#39;t want their arms to swing to the side as they walk. However, you could still use the standard walking animation while carrying the object by using a mask to only play the upper body portion of the carrying animation over the top of the walking animation.</p>
<p>You can apply masking to animation clips either during import time, or at runtime. Masking during import time is preferable, because it allows the discarded animation data to be omitted from your build, making the files smaller and therefore using less memory. It also makes for faster processing because there is less animation data to be blended at runtime. In some cases, import masking may not be suitable for your purposes. In that case, you can apply a mask at runtime by creating an <strong>Avatar Mask</strong> Asset, and <a href="AnimationLayers.html">using it in the layer settings</a> of your <strong>Animator Controller</strong>. </p>
<p>To create an empty Avatar Mask Asset, you can either:</p>
<ul>
<li>Choose <strong>Create</strong> &gt; <strong>Avatar Mask</strong> from the <strong>Assets</strong> menu.</li>
<li>Click the Model object you want to define the mask on in the <strong>Project</strong> view, and then right-click and choose <strong>Create</strong> &gt; <strong>Avatar Mask</strong>.</li>
</ul>
<p>The new Asset appears in the <strong>Project</strong> view:</p>
<p><img src="../uploads/Main/ConfiguringtheAvatar-Mask.png" alt="The Avatar Mask window"></p>
<p>You can now <a href="class-AvatarMask.html">add portions of the body to the mask</a> and then add the mask to either an <a href="AnimationLayers.html">Animation Layer</a> or add a reference to it under the <a href="AnimationMaskOnImportedClips.html">Mask</a> section of the <a href="class-AnimationClip.html">Animation tab</a>.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Copyright © 2019 Unity Technologies<br>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
