<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],   j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-MC35ML');</script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
  
    <title>Exhaust Smoke from a Vehicle | Unity Technologies Developer Guide </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Exhaust Smoke from a Vehicle | Unity Technologies Developer Guide ">
    <meta name="generator" content="docfx 2.40.7.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" class="manual">
	<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MC35ML" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
        
        		<div class="back-to-unity-group">
        			<a class="back-to-unity" href="http://docs.unity3d.com/">docs.unity3d.com</a>
        		</div>
        
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items"></div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="exhaust-smoke-from-a-vehicle">Exhaust Smoke from a Vehicle</h1>

<p>Cars and many other vehicles emit exhaust smoke as they convert fuel into power. You can use a particle system to add an exhaust as a nice finishing touch for a vehicle.</p>
<p><img src="../uploads/Main/PartSysExhaustScreenshot.png" alt="An exhaust generated by a particle system"></p>
<h2 id="timeline-of-a-particle">Timeline of a Particle</h2>
<p>Exhaust smoke emerges from the pipe quite fast but then rapidly slows down on contact with the atmosphere. As it slows, it spreads out, becoming fainter and soon dissipating into the air. Since the exhaust gas is hot, it also rises slightly as it passes through the colder air surrounding it.</p>
<p>A particle of exhaust smoke must start off no larger than the width of the pipe but it will then grow in size considerably over its short lifetime. It will usually start off partly transparent and fade to total transparency as it mixes with the air. As regards dynamics, the particle will be emitted quite fast but then slow rapidly and will also lift upward slightly.</p>
<h2 id="implementation">Implementation</h2>
<p>In the <em>Shape</em> module, select the <em>Cone</em> shape and set its <em>Angle</em> property to zero; the &quot;cone&quot; in this case will actually be a cylindrical pipe. The <em>Radius</em> of the pipe naturally depends on the size of the vehicle but you can usually set it by matching the radius Gizmo in the scene view to the vehicle model (eg, a car model will usually feature an exhaust pipe or a hole at the back whose size you can match). The radius actually determines quite a few things about the property settings you choose, such as the particle size and emission rate. For the purposes of this example, we will assume the vehicle is a car which follows Unity&#39;s standard size convention of one world unit to one metre; the radius is thus set to about 0.05 or 5cm.</p>
<p>A suitable graphic for the smoke particle is provided by the <em>Smoke4</em> material provided in the standard assets. If you don&#39;t already have these installed then select <strong>Assets &gt; Import Package &gt; Particles</strong> from the menu. Then, go to the <em>Renderer</em> module of the particle system and set the <em>Material</em> property to <em>Smoke4</em>.</p>
<p>The default lifetime of five seconds is generally too long for car exhaust fumes, so you should open the Particle System module (which has the same name as the GameObject, eg, &quot;Exhaust&quot;) and set the <em>Start Lifetime</em> to about 2.5 seconds. Also in this module, set the <em>Simulation Space</em> to <em>World</em> and the <em>Gravity Modifier</em> to a small negative value, say about -0.1. Using a world simulation space allows the smoke to hang where it is produced even when the vehicle moves. The negative gravity effect causes the smoke particles to rise as if they are composed of hot gas. A nice extra touch is to use the small menu arrow next to <em>Start Rotation</em> to select the <em>Random Between Two Constants</em> option. Set the two values to 0 and 360, respectively, and the smoke particles will be randomly rotated as they are emitted. Having many particles that are identically aligned is very noticeable and detracts from the effect of a random, shapeless smoke trail.</p>
<p>At this stage, the smoke particles are starting to look realistic and the default emission rate creates a nice &quot;chugging&quot; effect of an engine. However, the smoke doesn&#39;t billow outwards and dissipate as yet. Open the <em>Color Over Lifetime</em> module and click the top gradient stop on the right hand end of the gradient (this controls the transparency of &quot;alpha&quot; value of the color). Set the alpha value to zero and you should see the smoke particles fading to nothing in the scene. Depending on how clean your engine is, you may also want to reduce the alpha value of the gradient at the start; thick, dark smoke tends to suggest dirty, inefficient combustion.</p>
<p>As well as fading, the smoke should also increase in size as it escapes and you can easily create this effect with the <em>Size Over Lifetime</em> module. Open the module, select the curve and slide the curve handle at the left hand end to make the particles start off at a fraction of their full size. The exact size you choose depends on the size of the exhaust pipe but a value slightly larger than the pipe gives a good impression of escaping gas. (Starting the particles at the same size as the pipe suggests that the gas is being held to its shape by the pipe but of course, gas doesn&#39;t have a defined shape.) Use the simulation of the particle system in the scene view to get a good visual impression of how the smoke looks. You may also want to increase the <em>Start Size</em> in the particle system module at this point if the smoke doesn&#39;t disperse far enough to create the effect you want.</p>
<p>Finally, the smoke should also slow down as it disperses. An easy way to make this happen is with the <em>Force Over Lifetime</em> module. Open the module and set the <em>Space</em> option to <em>Local</em> and the Z component of the force to a negative value to indicate that the particles are pushed back by the force (the system emits the particles along the positive Z direction in the object&#39;s local space). A value of about -0.75 works quite well for the system if the other parameters are set up as suggested above.</p>
<h2 id="usage">Usage</h2>
<p>You can position the exhaust particle system by placing it on a child object of the main vehicle. For simple games, you can just enable the <em>Play On Awake</em> and <em>Looping</em> properties and let the system run. In most cases, however, you will probably want to vary at least the emission rate as the vehicle moves. This is firstly for authenticity (ie, an engine produces more smoke as it works harder) but it also helps to prevent the smoke particles from being spread out as the vehicle moves. A fast-moving vehicle with too low an emission rate will appear to produce distinct &quot;puffs&quot; of smoke, which is highly unrealistic.</p>
<p>You can vary the emission rate very easily from a script. If you have a variable in the script that represents the engine revs or the speed of the vehicle then you can simply multiply this value by a constant and assign the result to the ParticleSystem&#39;s emissionRate property.</p>
<pre><code>    // C#

    using UnityEngine;
    using System.Collections;

    public class PartScriptTestCS : MonoBehaviour {

        public float engineRevs;
        public float exhaustRate;

        ParticleSystem exhaust;


        void Start () {
            exhaust = GetComponent&lt;ParticleSystem&gt;();
        }


        void Update () {
            exhaust.emissionRate = engineRevs * exhaustRate;
        }

    }



    // JS

    var engineRevs: float;
    var exhaustRate: float;

    var exhaust: ParticleSystem;


    function Start() {
        exhaust = GetComponent.&lt;ParticleSystem&gt;();
    }


    function Update () {
        exhaust.emissionRate = engineRevs * exhaustRate;
    }
</code></pre><h2 id="further-ideas">Further Ideas</h2>
<p>The basic scheme creates quite a convincing impression of exhaust smoke but you will probably have noticed that the &quot;character&quot; of the engine changes as you vary the parameters. An poorly tuned, inefficient engine tends to burn its fuel incompletely, resulting in heavy, dark smoke that persists for a long time in the air. This would be perfect for an old farm tractor but not for a high-performance sports car. For a &quot;clean&quot; engine, you should use small values for the lifetime, opacity and size increase of the particles. For a &quot;dirty&quot; engine, you should increase these values and perhaps use the <em>Bursts</em> property of the <em>Emission</em> module to create the impression of the engine spluttering.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Copyright © 2019 Unity Technologies<br>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
