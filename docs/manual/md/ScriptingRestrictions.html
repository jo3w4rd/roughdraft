<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],   j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-MC35ML');</script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
  
    <title>Scripting restrictions | Unity Technologies Developer Guide </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Scripting restrictions | Unity Technologies Developer Guide ">
    <meta name="generator" content="docfx 2.40.7.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" class="manual">
	<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MC35ML" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
        
        		<div class="back-to-unity-group">
        			<a class="back-to-unity" href="http://docs.unity3d.com/">docs.unity3d.com</a>
        		</div>
        
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items"></div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="scripting-restrictions">Scripting restrictions</h1>

<p>We strive to provide a common scripting API and experience across all platforms Unity supports. However, some platforms have inherent restrictions. To help you understand these restrictions and support cross-platform code, the following table describes which restrictions apply to each platform and scripting backend:</p>
<h2 id="net-4x-equivalent-scripting-runtime">.NET 4.x equivalent scripting runtime</h2>
<table>
<thead>
<tr>
<th style="text-align:left"><strong><em>Platform (scripting backend)</em></strong></th>
<th style="text-align:left"><strong><em>Ahead-of-time compile</em></strong></th>
<th style="text-align:left"><strong><em>No threads</em></strong></th>
<th style="text-align:left"><strong><em>.NET Core class libraries subset</em></strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Android (IL2CPP)</td>
<td style="text-align:left">&#x2714;</td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">Android (Mono)</td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">iOS (IL2CPP)</td>
<td style="text-align:left">&#x2714;</td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">PlayStation 4 (IL2CPP)</td>
<td style="text-align:left">&#x2714;</td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">PlayStation Vita (IL2CPP)</td>
<td style="text-align:left">&#x2714;</td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">Standalone (IL2CPP)</td>
<td style="text-align:left">&#x2714;</td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">Standalone (Mono)</td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">Switch (IL2CPP)</td>
<td style="text-align:left">&#x2714;</td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">Universal Windows Platform (IL2CPP)</td>
<td style="text-align:left">&#x2714;</td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">Universal Windows Platform (.NET)</td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
<td style="text-align:left">&#x2714;</td>
</tr>
<tr>
<td style="text-align:left">WebGL (IL2CPP)</td>
<td style="text-align:left">&#x2714;</td>
<td style="text-align:left">&#x2714;</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">WiiU (Mono)</td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">XBox One (IL2CPP)</td>
<td style="text-align:left">&#x2714;</td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
<h2 id="net-35-equivalent-scripting-runtime">.NET 3.5 equivalent scripting runtime</h2>
<p><strong>Warning</strong>: This functionality is deprecated, and should no longer be used. Please use .NET 4.</p>
<table>
<thead>
<tr>
<th style="text-align:left"><strong><em>Platform (scripting backend)</em></strong></th>
<th style="text-align:left"><strong><em>Ahead-of-time compile</em></strong></th>
<th style="text-align:left"><strong><em>No threads</em></strong></th>
<th style="text-align:left"><strong><em>.NET Core class libraries subset</em></strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Android (IL2CPP)</td>
<td style="text-align:left">&#x2714;</td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">Android (Mono)</td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">iOS (IL2CPP)</td>
<td style="text-align:left">&#x2714;</td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">PlayStation 4 (IL2CPP)</td>
<td style="text-align:left">&#x2714;</td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">PlayStation 4 (Mono)</td>
<td style="text-align:left">&#x2714;</td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">PlayStation Vita (IL2CPP)</td>
<td style="text-align:left">&#x2714;</td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">PlayStation Vita (Mono)</td>
<td style="text-align:left">&#x2714;</td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">Standalone (IL2CPP)</td>
<td style="text-align:left">&#x2714;</td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">Standalone (Mono)</td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">Switch (IL2CPP)</td>
<td style="text-align:left">&#x2714;</td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">Universal Windows Platform (IL2CPP)</td>
<td style="text-align:left">&#x2714;</td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">Universal Windows Platform (.NET)</td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
<td style="text-align:left">&#x2714;</td>
</tr>
<tr>
<td style="text-align:left">WebGL (IL2CPP)</td>
<td style="text-align:left">&#x2714;</td>
<td style="text-align:left">&#x2714;</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">WiiU (Mono)</td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">XBox One (IL2CPP)</td>
<td style="text-align:left">&#x2714;</td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">XBox One (Mono)</td>
<td style="text-align:left">&#x2714;</td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
<p><a name="AOT"></a></p>
<h2 id="ahead-of-time-compile">Ahead-of-time compile</h2>
<p>Some platforms do not allow runtime code generation. Therefore, any managed code which depends upon just-in-time (JIT) compilation on the target device will fail. Instead, we need to compile all of the managed code ahead-of-time (AOT). Often, this distinction doesn&#39;t matter, but in a few specific cases, AOT platforms require additional consideration.</p>
<h3 id="systemreflectionemit">System.Reflection.Emit</h3>
<p>An AOT platform cannot implement any of the methods in the <strong>System.Reflection.Emit</strong> namespace. Note that the rest of <strong>System.Reflection</strong> is acceptable, as long as the compiler can infer that the code used via reflection needs to exist at runtime.</p>
<h3 id="serialization">Serialization</h3>
<p>AOT platforms may encounter issues with serialization and deserlization due to the use of reflection. If a type or method is only used via reflection as part of serialization or deserialization, the AOT compiler cannot detect that code needs to be generated for the type or method.</p>
<h3 id="generic-virtual-methods">Generic virtual methods</h3>
<p>Generic methods require the compiler to do some additional work to expand the code written by the developer to the code actually executed on the device. For example, we need different code for <strong>List</strong> with an <strong>int</strong> or a <strong>double</strong>. In the presence of virtual methods, where behavior is determined at runtime rather than compile time, the compiler can easily require runtime code generation in places where it is not entirely obvious from the source code.</p>
<p>Suppose we have the following code, which works exactly as expected on a JIT platform (it prints &quot;Message value: Zero&quot; to the console once):</p>
<pre><code>using UnityEngine;
using System;

public class AOTProblemExample : MonoBehaviour, IReceiver
{
    public enum AnyEnum 
    {
        Zero,
        One,
    }

    void Start() 
    {
        // Subtle trigger: The type of manager *must* be
        // IManager, not Manager, to trigger the AOT problem.
        IManager manager = new Manager();
        manager.SendMessage(this, AnyEnum.Zero);
    }

    public void OnMessage&lt;T&gt;(T value) 
    {
        Debug.LogFormat(&quot;Message value: {0}&quot;, value);
    }
}

public class Manager : IManager 
{
    public void SendMessage&lt;T&gt;(IReceiver target, T value) {
        target.OnMessage(value);
    }
}

public interface IReceiver
{
    void OnMessage&lt;T&gt;(T value);
}

public interface IManager 
{
    void SendMessage&lt;T&gt;(IReceiver target, T value);
}
</code></pre><p>When this code is executed on an AOT platform with the IL2CPP scripting backend, this exception occurs:</p>
<pre><code>ExecutionEngineException: Attempting to call method &#39;AOTProblemExample::OnMessage&lt;AOTProblemExample+AnyEnum&gt;&#39; for which no ahead of time (AOT) code was generated.
  at Manager.SendMessage[T] (IReceiver target, .T value) [0x00000] in &lt;filename unknown&gt;:0 
  at AOTProblemExample.Start () [0x00000] in &lt;filename unknown&gt;:0 
</code></pre><p>Likewise, the Mono scripting backend provides this similar exception:</p>
<pre><code>  ExecutionEngineException: Attempting to JIT compile method &#39;Manager:SendMessage&lt;AOTProblemExample/AnyEnum&gt; (IReceiver,AOTProblemExample/AnyEnum)&#39; while running with --aot-only.
  at AOTProblemExample.Start () [0x00000] in &lt;filename unknown&gt;:0 
</code></pre><p>The AOT compiler does not realize that it should generate code for the generic method <strong>OnMessage</strong> with a <strong>T</strong> of <strong>AnyEnum</strong>, so it blissfully continues, skipping this method. When that method is called, and the runtime can&#39;t find the proper code to execute, it gives up with this error message.</p>
<p>To work around an AOT issue like this, we can often force the compiler to generate the proper code for us. If we add a method like this to the <strong>AOTProblemExample</strong> class:</p>
<pre><code>public void UsedOnlyForAOTCodeGeneration() 
{
    // IL2CPP needs only this line.
    OnMessage(AnyEnum.Zero);

    // Mono also needs this line. Note that we are
    // calling directly on the Manager, not the IManager interface.
    new Manager().SendMessage(null, AnyEnum.Zero);

    // Include an exception so we can be sure to know if this method is ever called.
    throw new InvalidOperationException(&quot;This method is used for AOT code generation only. Do not call it at runtime.&quot;);
}
</code></pre><p>When the compiler encounters the explicit call to <strong>OnMessage</strong> with a <strong>T</strong> of <strong>AnyEnum</strong>, it generates the proper code for the runtime to execute. The method <strong>UsedOnlyForAOTCodeGeneration</strong> does not ever need to be called; it just needs to exist for the compiler to see it.</p>
<p><a name="threads"></a></p>
<h2 id="no-threads">No threads</h2>
<p>Some platforms do not support the use of threads, so any managed code that uses the <strong>System.Threading</strong> namespace will fail at runtime. Also, some parts of the .NET class libraries implicitly depend upon threads. An often-used example is the <strong>System.Timers.Timer</strong> class, which depends on support for threads.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Copyright © 2019 Unity Technologies<br>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
