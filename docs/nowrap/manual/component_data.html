<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],   j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-5V25JL6');</script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
  
    <title>General purpose components | Unity Entities Documentation | 0.2.0-preview.12 </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="General purpose components | Unity Entities Documentation | 0.2.0-preview.12 ">
    <meta name="generator" content="docfx 2.40.12.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    <meta property="unity:packageTitle" content="Unity Entities Documentation | 0.2.0-preview.12">
    <meta property="docfx:rel" content="../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" class="manual">
	<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5V25JL6" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
        
        		<div class="back-to-unity-group">
        			<a class="back-to-unity" href="http://docs.unity3d.com/">docs.unity3d.com</a>
        		</div>
        
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items"></div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="ecs-component-data">
<h1 id="general-purpose-components">General purpose components</h1>

<p>ComponentData in Unity (also known as a component in standard ECS terms) is a struct that contains only the instance data for an <a href="entities.html">entity</a>. ComponentData should not contain methods beyond utility functions for accessing the data in the struct. All game logic and behaviour should be implemented in systems. To put this in terms of the old Unity system, this is somewhat similar to an old Component class, but one that <strong>only contains variables</strong>.</p>
<p>The Unity ECS API provides an interface called <a class="xref" href="../api/Unity.Entities.IComponentData.html">IComponentData</a> that you can implement in your code to declare a general-purpose component type.</p>
<h2 id="icomponentdata">IComponentData</h2>
<p>Traditional Unity components (including <code>MonoBehaviour</code>) are <a href="https://en.wikipedia.org/wiki/Object-oriented_programming">object-oriented</a> classes which contain data and methods for behavior. <code>IComponentData</code> is a pure ECS-style component, meaning that it defines no behavior, only data. <code>IComponentData</code> should be implemented as struct rather than a class, meaning that it is copied <a href="https://stackoverflow.com/questions/373419/whats-the-difference-between-passing-by-reference-vs-passing-by-value?answertab=votes#tab-top">by value instead of by reference</a> by default. You will usually need to use the following pattern to modify data:</p>
<pre><code class="lang-c#">var transform = group.transform[index]; // Read

transform.heading = playerInput.move; // Modify
transform.position += deltaTime * playerInput.move * settings.playerMoveSpeed;

group.transform[index] = transform; // Write
</code></pre><p><code>IComponentData</code> structs may not contain references to managed objects. Since <code>ComponentData</code> lives in simple non-garbage-collected tracked <a href="chunk_iteration.html">chunk memory</a> allowing for many performance advantages.</p>
<h3 id="managed-icomponentdata">Managed IComponentData</h3>
<p>To help porting existing code over to ECS in a piecemeal fashion, interoperating with managed data not suitable in <code>ISharedComponentData</code> or when first prototyping what your data layout will look like, it may be helpful to use a managed <code>IComponentData</code> (that is, <code>IComponentData</code> declared using a <code>class</code> rather than <code>struct</code>). These components are used the same way as value type <code>IComponentData</code> however internally are handled in a much different (and slower) way. Users who do not need managed component support should define <code>UNITY_DISABLE_MANAGED_COMPONENTS</code> in their Project Settings -&gt; Player -&gt; Scripting Define Symbols to prevent accidental usage.</p>
<p>By nature of being a managed type, managed <code>IComponentData</code> have the following performance drawbacks compared to valuetype <code>IComponentData</code>:</p>
<ul>
<li>Cannot be used with the Burst Compiler</li>
<li>Cannot be used in Job structs </li>
<li>Cannot use <a href="chunk_iteration.html">chunk memory</a> </li>
<li>Require garbage collection</li>
</ul>
<p>Users should try to limit the number of managed components, preferring blittable types as much as possible. </p>
<p>Managed <code>IComponentData</code> must implement the <code>IEquatable&lt;T&gt;</code> interface and override for <code>Object.GetHashCode()</code>. As well, for serialization purposes, managed components must be default constructible.</p>
<p>Since managed components are by their nature not blittable, these components are stored in a managed C# array known indirectly by each <code>ArchetypeChunk</code> and are indexed to by <code>Entity</code>. </p>
<p>You must set the value of the component on the main thread using either the  <code>EntityManager</code> or <code>EntityCommandBuffer</code>. Being a reference type, you may change value of the component without moving entities across chunks
unlike <a class="xref" href="../api/Unity.Entities.ISharedComponentData.html">ISharedComponentData</a> and thus does not create a sync-point. However while logically stored separate from value-type components, 
managed components still contribute to an entity&#39;s <code>EntityArchetype</code> definition. As such, adding a new managed component to an entity will still cause a new archetype to be created (if a matching archetype doesn&#39;t exist already) and the entity to be moved to a new chunk.</p>
<p>See file: <em>/Packages/com.unity.entities/Unity.Entities/IComponentData.cs</em>.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Copyright © 2019 Unity Technologies<br>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
